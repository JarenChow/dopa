// https://github.com/JarenChow/dopa v1.1.0 Created by JarenChow in 2021
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).dopa=i()}(this,function(){"use strict";function i(t){t.t=yt,t.i="start",t.h=St,t.u="ltr"}function c(){return this}function o(t){return t!=xt}function f(t){return t===It}function u(t){return t!==It}function a(t){return"string"==typeof t}function r(t){return"function"==typeof t}function l(t){return t!=xt&&"object"==typeof t}function t(t,i){r(i)&&i!==q&&(t.prototype=G(i.prototype,{constructor:{value:t}}));for(var n=2;n<arguments.length;n++)j(t.prototype,arguments[n])}function n(t,i,n,s,h){var e=i+" "+n+" "+s+" "+h,u=Lt.get(e);return f(u)&&(u=new Dt(3755),Lt.set(e,u)),e=u.get(t),f(e)&&(Pi(Qt,i,n,s,h),e=Qt.measureText(t),u.set(t,j(e,{actualBoundingBoxWidth:{value:e.actualBoundingBoxLeft+e.actualBoundingBoxRight},actualBoundingBoxHeight:{value:e.actualBoundingBoxAscent+e.actualBoundingBoxDescent}}))),e}function v(t,i){return n(t,i,Qt.i,Qt.h,Qt.u).width}function d(t,i,n){var s=Wt.get(t);function h(){i.call(n,s)}f(s)?((s=W.createElement("img")).addEventListener("load",h,{once:!0}),s.src=t,Wt.set(t,s)):s.complete?h():s.addEventListener("load",h,{once:!0})}function h(t,i,n,s){return Qt.createLinearGradient(t,i,n,s)}function g(t,i,n,s,h,e){return Qt.createRadialGradient(t,i,n,s,h,e)}function s(t,i,n){return Qt.createConicGradient(t,i,n)}function e(t,i){return Qt.createPattern(t,Tt(i,"repeat"))}function _(t,i){return t%i+(t<0)*i}function p(t,i,n){return M(i,J(n,t))}function m(t){return wt<t||t<-wt}function b(t){return m(t)?t:t<0?-wt:wt}function P(t){return 0<(t=~~t)?t:1}function k(t,i,n){return Rt(i)&&(i=t,t=0),t+K(ut()*(i-t+(n||0)))}function y(t,i,n){return t+(i-t)*n}var S=window,w=S.Map,x=S.Array.prototype.slice,I=S.Proxy,R=S.ResizeObserver,T=S.IntersectionObserver,C=S.ImageData,A=S.encodeURI,B=S.parseFloat,D=S.parseInt,F=S.setTimeout,X=S.setInterval,Y=S.clearInterval,Q=S.requestAnimationFrame,L=S.cancelAnimationFrame,W=document,q=Object,z=q.keys,G=q.create,H=q.assign,O=q.freeze,j=q.defineProperties,E=q.prototype.toString,N=Math,J=N.min,M=N.max,U=N.sign,K=N.floor,Z=N.ceil,V=N.round,$=N.abs,tt=N.pow,it=N.sqrt,nt=N.sin,st=N.cos,ht=N.tan,et=N.atan2,ut=N.random,rt=N.PI,ot=2*rt,ct=2*rt/3,ft=rt/2,at=rt/3,lt=4*rt,vt=lt/9,dt=it(3),gt={alpha:!0,colorSpace:"srgb",desynchronized:!1},_t="source-over",pt="none",mt="rgba(0, 0, 0, 0)",bt="#000000",Pt="#000000",kt=[],yt="10px sans-serif",St="alphabetic",wt=tt(2,-14),xt=null,It=void 0,Rt=function(t){return t==xt},Tt=function(t,i){return Rt(t)?i:t},Ct=function(t){switch(t){case 9:return 362880;case 8:return 40320;case 7:return 5040;case 6:return 720;case 5:return 120;case 4:return 24;case 3:return 6;case 2:return 2;case 1:case 0:return 1}return t*Ct(t-1)},At={o:{value:function(t){return f(this.l)?this.l=this.v=t:this.v=(t._=this.v).g=t,this}},p:{value:function(t){var i=t._,n=t.g;return u(i)?i.g=n:this.l=n,u(n)?n._=i:this.v=i,t._=t.g=It,this}}},Bt=H({m:{value:function(t){return this.P++,this.o(t)}},k:{value:function(t){return this.P--,this.p(t)}},S:{value:function(){return this.l=this.v=It,this.P=0,this}}},At),Dt=(t(Ft,q,{length:{get:function(){return this.I.P}},get:{value:function(t){var i=this.R.get(t);if(u(i)){t=this.I;return i!==t.v&&(t.k(i),t.m(i)),i.T}}},set:{value:function(t,i){var n,s,h,e=this.R;f(e.get(t))&&(h=(n=this.I).P,s=this.C,h>=this.A&&0<h&&(h=n.l,n.k(h),e.delete(h.B),this.C=h),s?s.T=i:s={T:i},s.B=t,n.m(s),e.set(t,s))}},clear:{value:function(){this.I.S(),this.R.clear()}}}),Ft);function Ft(t){this.I=j({},Bt).S(),this.R=new w,this.A=Tt(t,10)}var Xt=O({__proto__:xt,in:O({__proto__:xt,linear:function(t){return t},sinusoidal:function(t){return 1-st(t*ft)},quadratic:function(t){return t*t},cubic:function(t){return t*t*t},quartic:function(t){return t*t*t*t},quintic:function(t){return t*t*t*t*t},exponential:function(t){return 0===t?0:tt(1024,t-1)},circular:function(t){return 1-it(1-t*t)},back:function(t){return t*t*(2.70158*t-1.70158)},elastic:function(t){return 0===t?0:1===t?1:-tt(1024,t-1)*nt((10*t-10.75)*ct)},bounce:function(t){var i=7.5625,n=2.75;return(t=1-t)<1/n?1-i*t*t:t<2/n?.25-i*(t-=1.5/n)*t:t<2.5/n?.0625-i*(t-=2.25/n)*t:.015625-i*(t-=2.625/n)*t}}),out:O({__proto__:xt,linear:function(t){return t},sinusoidal:function(t){return nt(t*ft)},quadratic:function(t){return t*(2-t)},cubic:function(t){return--t*t*t+1},quartic:function(t){return 1- --t*t*t*t},quintic:function(t){return--t*t*t*t*t+1},exponential:function(t){return 1===t?1:1-tt(1024,-t)},circular:function(t){return it(1- --t*t)},back:function(t){return--t*t*(2.70158*t+1.70158)+1},elastic:function(t){return 0===t?0:1===t?1:tt(1024,-t)*nt((10*t-.75)*ct)+1},bounce:function(t){var i=7.5625,n=2.75;return t<1/n?i*t*t:t<2/n?i*(t-=1.5/n)*t+.75:t<2.5/n?i*(t-=2.25/n)*t+.9375:i*(t-=2.625/n)*t+.984375}}),inout:O({__proto__:xt,linear:function(t){return t},sinusoidal:function(t){return(1-st(t*rt))/2},quadratic:function(t){return t<.5?2*t*t:1-2*--t*t},cubic:function(t){return t<.5?4*t*t*t:1+4*--t*t*t},quartic:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},quintic:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},exponential:function(t){return 0===t?0:1===t?1:t<.5?tt(1024,2*t-1)/2:1-tt(1024,1-2*t)/2},circular:function(t){return t<.5?(1-it(1-4*t*t))/2:(it(1-4*--t*t)+1)/2},back:function(t){var i=2.5949095;return t<.5?2*t*t*(7.189819*t-i):2*--t*t*((1+i)*t*2+i)+1},elastic:function(t){return 0===t?0:1===t?1:t<.5?-(tt(1024,2*t-1)*nt((20*t-11.125)*vt))/2:tt(1024,1-2*t)*nt((20*t-11.125)*vt)/2+1},bounce:function(t){return t<.5?(1-Xt.out.bounce(1-2*t))/2:(1+Xt.out.bounce(2*t-1))/2}})}),Yt=W.createElement("canvas"),Qt=Yt.getContext("2d",gt);i(Qt);var Lt=new w,Wt=new Dt(50),qt=W.createElement("a"),zt={value:c,writable:!0},Gt={value:function(){return!1},writable:!0},Ht=O({__proto__:xt,ease:Xt,noop:c,extends:t,measureText:n,measureTextWidth:v,measureTextFontSize:function(e,u,r,t,i){return 0===e.length||0===u?0:(Rt(t)&&(t=K(u/e.length)),Rt(i)&&(i=Z(u/e.length*4)),function t(i,n){{if(i===n)return i;if(i+1===n)return v(e,n+"px "+r)>u?i:n}var s=K((i+n)/2),h=v(e,s+"px "+r);return u<h?t(i,s-1):h<u?t(s,n):s}(t,i))},loadImage:d,loadImages:function(t,i,n){for(var s={},h=0,e=z(t),u=e.length,r=0;r<u;r++)d(t[e[r]],o,e[r]);function o(t){s[this]=t,++h===u&&i.call(n,s)}},createLinearGradient:h,createRadialGradient:g,createConicGradient:s,createPattern:e,normalizeNumber:_,limitNumber:p,isNotAroundZero:m,saveURL:function(t,i){qt.href=t,qt.download=i,qt.click()},randInt:k,lerp:y});function Ot(t){this.alpha=Tt(t,255)}t(Ot,q,{alpha:{get:function(){return this.D},set:function(t){this.D=p(t,0,255)}},fromString:{value:function(t){return this.alpha=255*(f(t)?1:B(t)),this}},toString:{value:function(){return V(this.D)/255+""}}});function jt(t){return.04045<(t/=255)?tt((t+.055)/1.055,2.4):t/12.92}function Et(t){return 255*(.0031308<t?1.055*tt(t,1/2.4)-.055:12.92*t)}function Nt(t){return 6/29<t?t*t*t:18/29*6/29*(t-4/29)}function Jt(t){return(t<16?"0":"")+t.toString(16)}function Mt(t,i,n,s){s.red=y(t.red,i.red,n),s.green=y(t.green,i.green,n),s.blue=y(t.blue,i.blue,n)}var Ut=function(t,i,n,s,h){4===arguments.length?Mt(t,i,255/n,s):5===arguments.length&&Ut(t,i,V(255*(1-(i.red-s.red)/(t.red-n.red)))||V(255*(1-(i.green-s.green)/(t.green-n.green)))||V(255*(1-(i.blue-s.blue)/(t.blue-n.blue)))||128,h)};function Kt(t,i,n,s){Ot.call(this,s),this.red=Tt(t,0),this.green=Tt(i,0),this.blue=Tt(n,0)}function Zt(t,i,n,s){Ot.call(this,s),this.hue=Tt(t,0),this.saturation=Tt(i,1),this.lightness=Tt(n,.5)}j(Kt,{mixing:{value:Mt},gammaMixing:{value:function(t,i,n,s){Mt(t,i,n,s);var h=s.red+s.green+s.blue;0!==h&&(t=tt(t.red+t.green+t.blue,.43),i=tt(i.red+i.green+i.blue,.43),n=tt(t+(i-t)*n,1/.43),s.red*=n/h,s.green*=n/h,s.blue*=n/h)}},extract:{value:Ut}}),t(Kt,Ot,{red:{get:function(){return this.F},set:function(t){this.F=p(t,0,255)}},green:{get:function(){return this.X},set:function(t){this.X=p(t,0,255)}},blue:{get:function(){return this.Y},set:function(t){this.Y=p(t,0,255)}},fromString:{value:function(t){t=/rgba?\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3}),? ?([0,1]\.?\d*)?\)/.exec(t);return this.red=B(t[1]),this.green=B(t[2]),this.blue=B(t[3]),Ot.prototype.fromString.call(this,t[4])}},fromHex:{value:function(t){t=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/.exec(t);return this.red=D(t[1],16),this.green=D(t[2],16),this.blue=D(t[3],16),this.alpha=f(t[4])?255:D(t[4],16),this}},fromHsl:{value:function(t){var i,n,s=_(t.hue,360),h=t.saturation,e=t.lightness,u=(1-$(2*e-1))*h,h=u*(1-$(s/60%2-1)),e=e-u/2,h=s<60?(i=u,n=h,0):s<120?(i=h,n=u,0):s<180?(i=0,n=u,h):s<240?(i=0,n=h,u):s<300?(i=h,n=0,u):(i=u,n=0,h);return this.red=255*(i+e),this.green=255*(n+e),this.blue=255*(h+e),this.alpha=t.alpha,this}},fromLab:{value:function(t){var i=(t.lightness+16)/116,n=.96422*Nt(i+t.a/500),s=Nt(i),i=.82521*Nt(i-t.b/200);return this.red=3.1338561*n-1.6168667*s-.4906146*i,this.green=-.9787684*n+1.9161415*s+.033454*i,this.blue=.0719453*n-.2289914*s+1.4052427*i,this.alpha=t.alpha,this.companding()}},inverseCompanding:{value:function(){return this.F=jt(this.F),this.X=jt(this.X),this.Y=jt(this.Y),this}},companding:{value:function(){return this.F=Et(this.F),this.X=Et(this.X),this.Y=Et(this.Y),this}},toString:{value:function(t){return"rgb"+(t?"a":"")+"("+V(this.F)+", "+V(this.X)+", "+V(this.Y)+(t?", "+Ot.prototype.toString.call(this):"")+")"}},toHex:{value:function(t){return"#"+Jt(V(this.F))+Jt(V(this.X))+Jt(V(this.Y))+(t?Jt(V(this.D)):"")}}}),t(Zt,Ot,{hue:{get:function(){return this.L},set:function(t){this.L=t}},saturation:{get:function(){return this.W},set:function(t){this.W=p(t,0,1)}},lightness:{get:function(){return this.q},set:function(t){this.q=p(t,0,1)}},fromString:{value:function(t){t=/hsla?\((\d{1,3}\.?\d*), ?(\d{1,3}\.?\d*)%, ?(\d{1,3}\.?\d*)%,? ?([0,1]\.?\d*)?\)/.exec(t);return this.hue=B(t[1]),this.saturation=B(t[2])/100,this.lightness=B(t[3])/100,Ot.prototype.fromString.call(this,t[4])}},fromRgb:{value:function(t){var i=t.red/255,n=t.green/255,s=t.blue/255,h=M(i,n,s),e=J(i,n,s),u=0,r=h-e,e=h+e;return r&&(u=i===h?(n-s)/r+6*(n<s):n===h?(s-i)/r+2:(i-n)/r+4,u*=60,r/=e<1?e:2-e),this.hue=u,this.saturation=r,this.lightness=e/2,this.alpha=t.alpha,this}},toString:{value:function(t){return"hsl"+(t?"a":"")+"("+this.L+", "+100*this.W+"%, "+100*this.q+"%"+(t?", "+Ot.prototype.toString.call(this):"")+")"}}});function Vt(t){return 6/29*6/29*6/29<t?tt(t,1/3):t/(18/29*6/29)+4/29}function $t(t,i,n,s){Ot.call(this,s),this.lightness=Tt(t,0),this.a=Tt(i,0),this.b=Tt(n,0)}function ti(t,i){this.x=Tt(t,0),this.y=Tt(i,0)}function ii(t,i){this.duration=t,this.interval=i}function ni(t,i){ii.call(this,t,i),this.G=It,this.H=this.O.bind(this),this.j()}function si(t,i){ni.call(this,t,Tt(i,16))}function hi(t,i){ni.call(this,t,i)}t($t,Ot,{lightness:{get:function(){return this.q},set:function(t){this.q=p(t,0,100)}},a:{get:function(){return this.N},set:function(t){this.N=p(t,-128,127)}},b:{get:function(){return this.J},set:function(t){this.J=p(t,-128,127)}},fromString:{value:function(t){t=/laba?\((\d{1,3}\.?\d*), ?(-?\d{1,3}\.?\d*), ?(-?\d{1,3}\.?\d*),? ?([0,1]\.?\d*)?\)/.exec(t);return this.lightness=B(t[1]),this.a=B(t[2]),this.b=B(t[3]),Ot.prototype.fromString.call(this,t[4])}},fromRgb:{value:function(t){var i=jt(t.red),n=jt(t.green),s=jt(t.blue),h=Vt(.2225045*i+.7168786*n+.0606169*s);return this.lightness=116*h-16,this.a=500*(Vt((.4360747*i+.3850649*n+.1430804*s)/.96422)-h),this.b=200*(h-Vt((.0139322*i+.0971045*n+.7141733*s)/.82521)),this.alpha=t.alpha,this}},toString:{value:function(t){return"lab"+(t?"a":"")+"("+this.q+", "+this.N+", "+this.J+(t?", "+Ot.prototype.toString.call(this):"")+")"}}}),j(ti,{mod:{value:function(t,i){return it((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y))}},rad:{value:function(t,i){return et(t.y-i.y,t.x-i.x)}}}),t(ti,q,{x:{get:function(){return this.M},set:function(t){this.M=t}},y:{get:function(){return this.U},set:function(t){this.U=t}},mod:{get:function(){return it(this.x*this.x+this.y*this.y)}},rad:{get:function(){return et(this.y,this.x)}},set:{value:function(t,i){return this.x=t,this.y=i,this}},skew:{value:function(t,i){i=this.y+this.x*ht(i);return this.x+=this.y*ht(t),this.y=i,this}},scale:{value:function(t,i){return this.x*=t,this.y*=i,this}},rotate:{value:function(t){var i=st(t),n=nt(t),t=this.x*n+this.y*i;return this.x=this.x*i-this.y*n,this.y=t,this}},translate:{value:function(t,i){return this.x+=t,this.y+=i,this}},transform:{value:function(t){var i=this.x*t.b+this.y*t.d+t.f;return this.x=this.x*t.a+this.y*t.c+t.e,this.y=i,this}},unit:{value:function(){var t=this.mod;return t?(this.x/=t,this.y/=t):this.x=this.y=0,this}},inverse:{value:function(){return this.x=-this.x,this.y=-this.y,this}},vertical:{value:function(){var t=this.x;return this.x=-this.y,this.y=t,this}},add:{value:function(t){return this.x+=t.x,this.y+=t.y,this}},subtract:{value:function(t){return this.x-=t.x,this.y-=t.y,this}},multiply:{value:function(t){var i=this.x*t.y+this.y*t.x;return this.x=this.x*t.x-this.y*t.y,this.y=i,this}},divide:{value:function(t){var i=t.x*t.x+t.y*t.y,n=(this.y*t.x-this.x*t.y)/i;return this.x=(this.x*t.x+this.y*t.y)/i,this.y=n,this}},dot:{value:function(t){return this.x*t.x+this.y*t.y}},cross:{value:function(t){return this.x*t.y-this.y*t.x}}}),t(ii,q,{duration:{get:function(){return this.K},set:function(t){this.K=wt<t?t:wt}},interval:{get:function(){return this.Z},set:function(t){this.Z=0<t?t:0}},onstart:zt,onresume:zt,onupdate:zt,onpause:zt,onstop:zt,onfinish:zt,start:{value:function(){return this.j().onstart(),this.resume()}},resume:{value:function(){return this.V()&&this.$().onresume(),this}},pause:{value:function(){return this.isRunning()&&this.tt().onpause(),this}},stop:{value:function(t){return this.isRunning()&&this.it(t).onstop(),this}},isRunning:Gt,isStopped:Gt,isPaused:Gt,nt:{value:0,writable:!0},j:{value:function(){return this.st=0,this.ht=this.Z,this}},V:Gt,$:zt,tt:zt,it:zt,et:zt,O:zt,ut:{value:function(t){return t<this.K?this.Z?t>this.ht&&this.rt(t):this.ot(t):(this.nt=t-this.K,this.tt().ot(this.K).onfinish(!0)),this}},rt:{value:function(t){var i=this.ht,n=this.Z,t=t-i;return this.ct(i).ht+=((t/n>>0)+U(t))*n,this}},ot:{value:function(t){return this.ct(this.ht=t)}},ct:zt}),t(ni,ii,At,{isRunning:{value:function(){return u(this.G)}},isStopped:{value:function(){return!this.isRunning()&&0===this.ft}},isPaused:{value:function(){return!this.isRunning()&&0!==this.ft}},add:{value:function(){for(var t=0;t<arguments.length;t++)this.m(arguments[t]);return this}},remove:{value:function(){for(var t=0;t<arguments.length;t++)this.k(arguments[t]);return this}},j:{value:function(){return this.at=this.ft=this.lt=this.vt=0,ii.prototype.j.call(this)}},V:{value:function(){return!this.isRunning()}},tt:{value:function(){return this.it().ft=this.vt,this}},et:{value:function(t){return this.vt=t,0===this.at?this.at=t:(0!==this.ft&&(this.lt+=t-this.ft,this.ft=0),this.ut(t-this.lt-this.at))}},ct:{value:function(t){var i=this.l,n=t-this.st;for(this.st=t;u(i)&&(i=i.et(n).g););return this.onupdate(t/this.K,t,n),this}},m:{value:function(t){t.dt&&(t.animation=this)}},k:{value:function(t){t.animation===this&&(t.animation=It)}}}),t(si,ni,{O:{value:function(){this.et(performance.now())}},$:{value:function(){return this.O(),this.G=X(this.H,this.Z),this}},it:{value:function(){return this.G=Y(this.G),this}}}),t(hi,ni,{O:{value:function(t){this.G=Q(this.H),this.et(t)}},$:{value:function(){return this.G=Q(this.H),this}},it:{value:function(){return this.G=L(this.G),this}}});function ei(t,i){ii.call(this,t,i)}t(ei,ii,{dt:{value:!0}},{animation:{get:function(){return this.gt},set:function(t){var i=this.gt;i!==t&&(i!=xt&&i.p(this),o(i=this.gt=t)&&i.o(this))}},onreverse:zt,reverse:{value:function(){if(this.isStopped())return this;this.st=p(this.st,0,this.K);var t=this.isForward(),i=this.Z;return this.O=t?this._t:this.bt,i&&(this.ht+=t?i:-i),this.onreverse(),this.resume()}},isRunning:{value:function(){return this.O!==c&&this.et!==c}},isStopped:{value:function(){return this.O===c}},isPaused:{value:function(){return this.O!==c&&this.et===c}},isForward:{value:function(){return this.O===this.bt}},j:{value:function(){return this.O=this.bt,ii.prototype.j.call(this)}},V:{value:function(){return!this.isStopped()}},$:{value:function(){var t=this.isForward(),i=this.st+=t?this.nt:-this.nt,n=this.gt,i=t?this.K-i:i;return n.st+i>n.K&&(n.K=n.st+i,n.resume()),this.et=this.O,this.nt=0,this}},tt:{value:function(){return this.et=c,this}},it:{value:function(t){return this.et=(this.st=t?this.K:0)?this.bt:this._t,this.O=c,this}},bt:{value:function(t){return this.ut(this.st+=t)}},_t:{value:function(t){return this.Pt(this.st-=t)}},Pt:{value:function(t){return 0<t?this.Z?t<this.ht&&this.rt(t):this.ot(t):(this.nt=-t,this.tt().ot(0).onfinish(!1)),this}},ct:{value:function(t){return this.onupdate(t/this.K,t),this}}});function ui(t){t.N=t.kt=t.yt=t.St=1,t.J=t.wt=t.xt=t.It=0,ri(t)}var ri=function(t){t.Rt=t.Tt=t.Ct=t.At=0};function oi(t,i){ti.call(this),this.originX=Tt(t,0),this.originY=Tt(i,0),this.skewX=this.skewY=this.rotation=0,this.scaleX=this.scaleY=1}t(oi,ti,{originX:{get:function(){return this.Bt},set:function(t){this.Bt=t}},originY:{get:function(){return this.Dt},set:function(t){this.Dt=t}},parent:{get:function(){return this.Ft},set:function(t){for(var i=t;i&&i!==this;)i=i.Ft;i!==this&&(this.Ft=t)}},skewX:{get:function(){return this.Xt},set:function(t){this.Xt!==t&&(this.Xt=t,this.Yt=ht(t))}},skewY:{get:function(){return this.Qt},set:function(t){this.Qt!==t&&(this.Qt=t,this.Lt=ht(t))}},scaleX:{get:function(){return this.Wt},set:function(t){this.Wt=b(t)}},scaleY:{get:function(){return this.qt},set:function(t){this.qt=b(t)}},rotation:{get:function(){return this.zt},set:function(t){this.zt!==t&&(this.zt=t,this.Gt=st(t),this.Ht=nt(t))}},alpha:{get:function(){return this.D},set:function(t){this.Ot=t}},compositeOperation:{get:function(){return this.jt},set:function(t){this.Et=t}},filter:{get:function(){return this.Nt},set:function(t){this.Jt=t}},shadowBlur:{get:function(){return this.Mt},set:function(t){this.Ut=t}},shadowColor:{get:function(){return this.Kt},set:function(t){this.Zt=t}},shadowOffsetX:{get:function(){return this.Vt},set:function(t){this.$t=t}},shadowOffsetY:{get:function(){return this.ti},set:function(t){this.ii=t}},fillStyle:{get:function(){return this.ni},set:function(t){this.si=t}},strokeStyle:{get:function(){return this.hi},set:function(t){this.ei=t}},lineDash:{get:function(){return this.ui},set:function(t){this.ri=t}},lineDashOffset:{get:function(){return this.oi},set:function(t){this.ci=t}},lineWidth:{get:function(){return this.fi},set:function(t){this.ai=t}},lineCap:{get:function(){return this.li},set:function(t){this.vi=t}},lineJoin:{get:function(){return this.di},set:function(t){this.gi=t}},miterLimit:{get:function(){return this._i},set:function(t){this.pi=t}},smoothingEnabled:{get:function(){return this.mi},set:function(t){this.bi=t}},smoothingQuality:{get:function(){return this.Pi},set:function(t){this.ki=t}},font:{get:function(){return this.t},set:function(t){this.yi=t}},align:{get:function(){return this.Si},set:function(t){this.wi=t}},baseline:{get:function(){return this.xi},set:function(t){this.Ii=t}},direction:{get:function(){return this.u},set:function(t){this.Ri=t}},drag:{value:function(t,i){var n,s=this.Ft;return s!=xt&&(n=s.wt*t+s.St*i,t=s.kt*t+s.It*i,i=n),this.x+=t,this.y+=i,this}},zoom:{value:function(t,i,n){var s,h=this.Ft;return h!=xt&&(s=h.wt*i+h.St*n+h.At,i=h.kt*i+h.It*n+h.Tt,n=s),this.x=y(i,this.x,t),this.y=y(n,this.y,t),this.scaleX*=t,this.scaleY*=t,this}},updateTransform:{value:function(){return this.Ti(),this}},updateStyle:{value:function(){for(var t,i,n,s,h,e,u,r=this;f(t)&&o(r.Ot)&&(t=r.Ot),f(i)&&o(r.Et)&&(i=r.Et),f(n)&&o(r.Jt)&&(n=r.Jt),f(s)&&o(r.Ut)&&(s=r.Ut),f(h)&&o(r.Zt)&&(h=r.Zt),f(e)&&o(r.$t)&&(e=r.$t),f(u)&&o(r.ii)&&(u=r.ii),r=r.parent;);return this.D=f(t)?1:t,this.jt=f(i)?_t:i,this.Nt=f(n)?pt:n,this.Mt=f(s)?0:s,this.Kt=f(h)?mt:h,this.Vt=f(e)?0:e,this.ti=f(u)?0:u,this}},updateFillStyle:{value:function(){for(var t,i=this;f(t)&&o(i.si)&&(t=i.si),i=i.parent;);return this.ni=f(t)?bt:t,this}},updateStrokeStyle:{value:function(){for(var t,i,n,s,h,e,u,r=this;f(t)&&o(r.ei)&&(t=r.ei),f(i)&&o(r.ri)&&(i=r.ri),f(n)&&o(r.ci)&&(n=r.ci),f(s)&&o(r.ai)&&(s=r.ai),f(h)&&o(r.vi)&&(h=r.vi),f(e)&&o(r.gi)&&(e=r.gi),f(u)&&o(r.pi)&&(u=r.pi),r=r.parent;);return this.hi=f(t)?Pt:t,this.ui=f(i)?kt:i,this.oi=f(n)?0:n,this.fi=f(s)?1:s,this.li=f(h)?"butt":h,this.di=f(e)?"miter":e,this._i=f(u)?10:u,this}},updateImageStyle:{value:function(){for(var t,i,n=this;f(t)&&o(n.bi)&&(t=n.bi),f(i)&&o(n.ki)&&(i=n.ki),n=n.parent;);return this.mi=!!f(t)||t,this.Pi=f(i)?"low":i,this}},updateTextStyle:{value:function(){for(var t,i,n,s,h=this;f(t)&&o(h.yi)&&(t=h.yi),f(i)&&o(h.wi)&&(i=h.wi),f(n)&&o(h.Ii)&&(n=h.Ii),f(s)&&o(h.Ri)&&(s=h.Ri),h=h.parent;);return this.t=f(t)?yt:t,this.Si=f(i)?"start":i,this.xi=f(n)?St:n,this.u=f(s)?"ltr":s,this}},a:{get:function(){return this.N}},b:{get:function(){return this.J}},c:{get:function(){return this.xt}},d:{get:function(){return this.yt}},e:{get:function(){return this.Rt}},f:{get:function(){return this.Ct}},Ti:{value:function(){var t,i=this.Ft,n=this.Yt,s=this.Lt,h=this.Wt,e=this.qt,u=this.Gt,r=this.Ht,o=u*h-s*r*e,c=r*h+s*u*e,f=-r*e+n*u*h,a=u*e+n*r*h,s=this.M+this.Bt*(1-o)-this.Dt*f,u=this.U+this.Dt*(1-a)-this.Bt*c;return i!=xt&&(i.updateTransform(),e=i.N,n=i.J,t=o*e+c*(r=i.xt),c=o*n+c*(h=i.yt),o=t,t=f*e+a*r,a=f*n+a*h,f=t,t=s*e+u*r+i.Rt,u=s*n+u*h+i.Ct,s=t),(this.Rt!==s||this.Ct!==u||this.N!==o||this.yt!==a||this.J!==c||this.xt!==f)&&(t=o*a-c*f,this.N=o,this.J=c,this.xt=f,this.yt=a,this.Rt=s,this.Ct=u,this.kt=a/t,this.wt=-c/t,this.It=-f/t,this.St=o/t,this.Tt=(f*u-a*s)/t,this.At=(c*s-o*u)/t,!0)}}});var ci=H({context:{get:function(){return this.Ci},set:function(t){this.Ci=t}}},{Ai:{value:!0}});function fi(t,i,n,s){oi.call(this,n,s),this.startX=Tt(t,0),this.startY=Tt(i,0)}t(fi,oi,ci,{startX:{get:function(){return this.Bi},set:function(t){this.Bi=t}},startY:{get:function(){return this.Di},set:function(t){this.Di=t}},fill:{value:function(t){return this.Yi().Xi().Fi(t)}},stroke:{value:function(){return this.Li().Xi().Qi()}},fillStroke:{value:function(t){return this.Wi().Xi().Fi(t).Qi()}},strokeFill:{value:function(t){return this.Wi().Xi().Qi().Fi(t)}},clip:{value:function(t){return this.Xi().zi().qi(t)}},restore:{value:function(t){for(var i,n=this.Ci,s=n.Gi;s.length&&(i=s.pop(),n.N=i.N,n.J=i.J,n.xt=i.xt,n.yt=i.yt,n.Rt=i.Rt,n.Ct=i.Ct,n.kt=i.kt,n.wt=i.wt,n.It=i.It,n.St=i.St,n.Tt=i.Tt,n.At=i.At,n.Hi=i.Hi,n.Oi=i.Oi,n.Nt=i.Nt,n.Mt=i.Mt,n.Kt=i.Kt,n.Vt=i.Vt,n.ti=i.ti,n.ni=i.ni,n.hi=i.hi,n.ui=i.ui,n.oi=i.oi,n.fi=i.fi,n.li=i.li,n.di=i.di,n._i=i._i,n.t=i.t,n.i=i.i,n.h=i.h,n.u=i.u,n.ji=i.ji,n.Ei=i.Ei,n.restore(),--t););return this}},clearRect:{value:function(t,i,n,s,h){return this.clip(h).Ci.clearRect(this.Bi+t,this.Di+i,n,s),this.restore()}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY)}},buildPath:{value:function(t,i,n){t.beginPath()},writable:!0},isPointInPath:{value:function(t,i){return this.Ni(!0,t,i)}},isPointInStroke:{value:function(t,i){return this.Ni(!1,t,i)}},isQuickInPath:{value:function(t,i){return this.Ji(!0,t,i)}},isQuickInStroke:{value:function(t,i){return this.Ji(!1,t,i)}},createLinearGradient:{value:function(t,i,n,s){return h(t+this.Bi,i+this.Di,n+this.Bi,s+this.Di)}},createRadialGradient:{value:function(t,i,n,s,h,e){return g(t+this.Bi,i+this.Di,n,s+this.Bi,h+this.Di,e)}},createConicGradient:{value:function(t,i,n){return s(t,i+this.Bi,n+this.Di)}},Fi:{value:function(t){return this.Ci.fill(t),this}},Qi:{value:function(){return this.Ci.stroke(),this}},Yi:{value:function(){return this.Ui().Mi()}},Li:{value:function(){return this.Ui().Ki()}},Wi:{value:function(){return this.Ui().Mi().Ki()}},Ui:{value:function(){var t=this.updateStyle().Ci,i=t.Zi;return t.Hi!==this.D&&(t.globalAlpha=t.Hi=this.D),t.Oi!==this.jt&&(t.globalCompositeOperation=t.Oi=this.jt),t.Nt!==this.Nt&&(t.filter=t.Nt=this.Nt),t.Mt!==this.Mt&&(t.shadowBlur=(t.Mt=this.Mt)*i),t.Kt!==this.Kt&&(t.shadowColor=t.Kt=this.Kt),t.Vt!==this.Vt&&(t.shadowOffsetX=(t.Vt=this.Vt)*i),t.ti!==this.ti&&(t.shadowOffsetY=(t.ti=this.ti)*i),this}},Mi:{value:function(){var t=this.updateFillStyle().Ci;return t.ni!==this.ni&&(t.fillStyle=t.ni=this.ni),this}},Ki:{value:function(){var t=this.updateStrokeStyle().Ci;return t.hi!==this.hi&&(t.strokeStyle=t.hi=this.hi),t.ui!==this.ui&&t.setLineDash(t.ui=this.ui),t.oi!==this.oi&&(t.lineDashOffset=t.oi=this.oi),t.fi!==this.fi&&(t.lineWidth=t.fi=this.fi),t.li!==this.li&&(t.lineCap=t.li=this.li),t.di!==this.di&&(t.lineJoin=t.di=this.di),t._i!==this._i&&(t.miterLimit=t._i=this._i),this}},qi:{value:function(t){return this.Ci.clip(t),this}},zi:{value:function(t){var i=this.Ci;return i.Gi.push({N:i.N,J:i.J,xt:i.xt,yt:i.yt,Rt:i.Rt,Ct:i.Ct,kt:i.kt,wt:i.wt,It:i.It,St:i.St,Tt:i.Tt,At:i.At,Hi:i.Hi,Oi:i.Oi,Nt:i.Nt,Mt:i.Mt,Kt:i.Kt,Vt:i.Vt,ti:i.ti,ni:i.ni,hi:i.hi,ui:i.ui,oi:i.oi,fi:i.fi,li:i.li,di:i.di,_i:i._i,t:i.t,i:i.i,h:i.h,u:i.u,ji:i.ji,Ei:i.Ei}),i.save(),this}},Vi:{value:function(){var t=this.updateTransform().Ci,i=this.N,n=this.J,s=this.xt,h=this.yt,e=this.Rt,u=this.Ct,r=t.kt,o=t.wt,c=t.It,f=t.St,a=t.Tt,l=t.At;return t.N!==i||t.yt!==h||t.J!==n||t.xt!==s?(t.transform(i*r+n*c,i*o+n*f,s*r+h*c,s*o+h*f,e*r+u*c+a,e*o+u*f+l),t.N=i,t.J=n,t.xt=s,t.yt=h,t.Rt=e,t.Ct=u,t.kt=this.kt,t.wt=this.wt,t.It=this.It,t.St=this.St,t.Tt=this.Tt,t.At=this.At):t.Rt===e&&t.Ct===u||(t.translate(e*r+u*c+a,e*o+u*f+l),t.Rt=e,t.Ct=u,t.Tt=this.Tt,t.At=this.At),this}},$i:{value:function(){var t=this.Ci,i=t.kt,n=t.wt,s=t.It,h=t.St,e=t.Tt,u=t.At;return 1!==i||1!==h||0!==n||0!==s?(t.transform(i,n,s,h,e,u),ui(t)):0===e&&0===u||(t.translate(e,u),ri(t)),this}},Xi:{value:function(){return this.Vi().rebuildPath(),this}},Ni:{value:function(t,i,n){var s=this.Ci,h=this.kt,e=this.wt,u=this.It,r=this.St,o=this.Tt,c=this.At,f=s.N,a=s.J,l=s.xt,v=s.yt,d=s.Zi,v=((h*a+e*v)*i+(u*a+r*v)*n+o*a+c*v+s.Ct)*d;return i=((h*f+e*l)*i+(u*f+r*l)*n+o*f+c*l+s.Rt)*d,n=v,t?this.tn(i,n):this.nn(i,n)}},tn:{value:function(t,i){return this.rebuildPath(),this.Ci.isPointInPath(t,i)}},nn:{value:function(t,i){return this.rebuildPath(),this.Ci.isPointInStroke(t,i)}},Ji:{value:function(t,i,n){var s=this.wt*i+this.St*n+this.At;return i=this.kt*i+this.It*n+this.Tt,n=s,t?this.sn(i,n):this.hn(i,n)}},sn:{value:function(t,i){var n=this.Ci.Zi;return this.$i().tn(t*n,i*n)}},hn:{value:function(t,i){var n=this.Ci.Zi;return this.$i().nn(t*n,i*n)}}});var ai={left:{get:function(){return this.Bi+this.en+this.un}},top:{get:function(){return this.Di+this.rn+this.cn}},right:{get:function(){return this.Bi+this.en+this.fn}},bottom:{get:function(){return this.Di+this.rn+this.an}},sn:{value:function(t,i){return t>=this.left&&i>=this.top&&t<=this.right&&i<=this.bottom}},hn:{value:function(t,i){var n=this.left,s=this.top,h=this.right,e=this.bottom,u=this.fi;return(0===V((t-n)/u)||0===V((t-h)/u))&&s<=i&&i<=e||(0===V((i-s)/u)||0===V((i-e)/u))&&n<=t&&t<=h}}},li=H({un:{get:function(){return J(this.width,0)}},cn:{get:function(){return J(this.height,0)}},fn:{get:function(){return M(this.width,0)}},an:{get:function(){return M(this.height,0)}}},ai),vi={en:{get:function(){return 0}},rn:{get:function(){return 0}}};function di(t,i,n,s,h,e){fi.call(this,t,i,h,e),this.width=n,this.height=s}function gi(t,i,n,s,h,e,u){di.call(this,t,i,n,s,e,u),this.spacing=h}t(di,fi,li,vi,{width:{get:function(){return this.ln},set:function(t){this.ln=t}},height:{get:function(){return this.vn},set:function(t){this.vn=t}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.width,this.height)}},buildPath:{value:function(t,i,n,s,h){t.beginPath(),t.rect(i,n,s,h)}}}),t(gi,di,{spacing:{get:function(){return this.dn},set:function(t){this.dn=P(t)}},rebuildPath:{value:function(){this.buildPath(this.context,this.left,this.top,this.right,this.bottom,this.spacing)}},buildPath:{value:function(t,i,n,s,h,e){var u;for(t.beginPath(),u=i+e;u<s;u+=e)t.moveTo(u,n),t.lineTo(u,h);for(u=n+e;u<h;u+=e)t.moveTo(i,u),t.lineTo(s,u)}}});N={radius:{get:function(){return this.gn},set:function(t){this.gn=t}}};function _i(t,i,n,s,h,e,u){di.call(this,t,i,n,s,e,u),this.radius=Tt(h,0)}function pi(t,i,n,s,h,e,u,r,o,c,f){di.call(this,t,i,e,u,s,h),a(n)?this.src=n:this.image=n,this.cropX=r,this.cropY=o,this.cropWidth=c,this.cropHeight=f}function mi(t,i,n,s,h,e,u,r,o,c){di.call(this,t,i,n,s,o,c),this.amplitude=Rt(h)?M(n,s)/8:h,this.method=Tt(e,nt),this.period=Tt(u,ot),this.phase=Tt(r,0)}t(_i,di,N,{rebuildPath:{value:function(){this.buildPath(this.context,this.left,this.top,this.right,this.bottom,this.radius)}},buildPath:{value:function(t,i,n,s,h,e){t.beginPath(),t.moveTo(i+e,n),t.arcTo(s,n,s,h,e),t.arcTo(s,h,i,h,e),t.arcTo(i,h,i,n,e),t.arcTo(i,n,s,n,e)}}}),t(pi,di,{width:{get:function(){return this._n?this.pn:this.ln},set:function(t){this.ln=t}},height:{get:function(){return this.mn?this.bn:this.vn},set:function(t){this.vn=t}},cropX:{get:function(){return this.Pn},set:function(t){this.Pn=t}},cropY:{get:function(){return this.kn},set:function(t){this.kn=t}},cropWidth:{get:function(){return this.yn},set:function(t){this.yn=t}},cropHeight:{get:function(){return this.Sn},set:function(t){this.Sn=t}},src:{get:function(){return this.wn},set:function(t){d(this.wn=A(t),this.xn,this)}},image:{get:function(){return this.In},set:function(t){Rt(t)?this.In=this.wn=this.pn=this.bn=It:this.In!==t&&(this.In=t,this.wn=t.src,this.pn=t.width,this.bn=t.height,this.onload())}},complete:{get:function(){return this.In&&this.In.src===this.wn}},onload:zt,toImageData:{value:function(){var t=this.width,i=this.height;return Yt.width=t,Yt.height=i,this.Rn(Qt,1,0,0),Qt.getImageData(0,0,t,i)}},createPattern:{value:function(t){t=e(this.In,t);return t.setTransform({a:this.N,b:this.J,c:this.xt,d:this.yt,e:this.Rt+this.Bi*this.N+this.Di*this.xt,f:this.Ct+this.Bi*this.J+this.Di*this.yt}),t}},draw:{value:function(){return this.Tn().Vi().Rn(this.Ci,this.Ci.Zi,this.Bi,this.Di)}},xn:{value:function(t){-1!==t.src.indexOf(this.wn)&&(this.image=t)}},_n:{get:function(){return Rt(this.ln)}},mn:{get:function(){return Rt(this.vn)}},Cn:{get:function(){return Rt(this.Pn)||Rt(this.kn)||Rt(this.yn)||Rt(this.Sn)}},Rn:{value:function(t,i,n,s){var h=this.In;return h!=xt&&(this.Cn?this._n&&this.mn?t.drawImage(h,n,s):t.drawImage(h,n,s,this.width,this.height):t.drawImage(h,this.Pn*i,this.kn*i,this.yn*i,this.Sn*i,n,s,this.width,this.height)),this}},Tn:{value:function(){return this.Ui().An()}},An:{value:function(){var t=this.updateImageStyle().Ci;return t.ji!==this.mi&&(t.imageSmoothingEnabled=t.ji=this.mi),t.Ei!==this.Pi&&(t.imageSmoothingQuality=t.Ei=this.Pi),this}}}),t(mi,di,{amplitude:{get:function(){return this.Bn},set:function(t){this.Bn=t}},method:{get:function(){return this.Dn},set:function(t){this.Dn=t}},period:{get:function(){return this.Fn},set:function(t){this.Fn=t}},phase:{get:function(){return this.Xn},set:function(t){this.Xn=t}},rebuildPath:{value:function(){this.buildPath(this.context,this.left,this.top,this.right,this.bottom,this.amplitude,this.method,this.period,this.phase)}},buildPath:{value:function(t,i,n,s,h,e,u,r,o){t.beginPath(),t.moveTo(i,n+e*u(o));for(var c=i;(c+=e/4)&&c<s;)t.lineTo(c,n+e*u((c-i)/(s-i)*r+o));t.lineTo(s,n+e*u(r+o)),t.lineTo(s,h),t.lineTo(i,h),t.closePath()}}});At={data:{get:function(){return this.Yn}}};function bi(t,i,n,s,h,e,u,r){ti.call(this),this.getImageData(t,i,n,s),this.dirtyX=h,this.dirtyY=e,this.dirtyWidth=u,this.dirtyHeight=r}t(bi,ti,ci,At,{dirtyX:{get:function(){return this.Qn},set:function(t){this.Qn=t}},dirtyY:{get:function(){return this.Ln},set:function(t){this.Ln=t}},dirtyWidth:{get:function(){return this.Wn},set:function(t){this.Wn=t}},dirtyHeight:{get:function(){return this.qn},set:function(t){this.qn=t}},imageData:{get:function(){return this.zn},set:function(t){Rt(t)?this.zn=this.Yn=this.ln=this.vn=It:this.zn!==t&&(this.zn=t,this.Yn=t.data,this.ln=t.width,this.vn=t.height)}},width:{get:function(){return this.ln}},height:{get:function(){return this.vn}},getImageData:{value:function(t,i,n,s){return n!=xt&&(u(n.data)?this.imageData=Rt(s)?n.zn||n:new C(n.data,s):Rt(t)||Rt(i)||Rt(this.Ci)?this.imageData=Qt.createImageData(n,s):this.imageData=this.Ci.getImageData(t,i,n,s),this.x=t,this.y=i),this}},toDataURL:{value:function(t,i){return this.Gn(),Yt.toDataURL(t,i)}},toBlob:{value:function(t,i,n){return this.Gn(),Yt.toBlob(t,i,n),this}},put:{value:function(){return this.Hn(this.Ci,this.M,this.U)}},getPixelIndex:{value:function(t,i){return 4*(t-this.M+(i-this.U)*this.ln)}},forEach:{value:function(t,i,n,s,h,e){arguments.length<=2&&(n=this.M,s=this.U,h=this.ln,e=this.vn);for(var u,r=this.Yn,o=this.getPixelIndex(n,s),c=4*(this.ln-h),f=n+h,a=s+e,l=s;l<a;l++){for(u=n;u<f;u++)t.call(i,r,o,u,l),o+=4;o+=c}return this}},mosaic:{value:function(t,i,n,s,h){if(1===t)return this;t=t||3,arguments.length<=1&&(i=this.M,n=this.U,s=this.ln,h=this.vn);for(var e,f=this.Yn,u=this.getPixelIndex(i,n),a=this.ln,r=K(h/t),o=K(s/t),c=s%t,l=h%t,v=0;v<r;v++){for(e=0;e<o;e++)d(u,t,t),u+=4*t;d(u,c,t),u+=4*(c+(t-1)*a)}for(e=0;e<o;e++)d(u,t,l),u+=4*t;function d(t,i,n){for(var s,h=t+4*(k(i)+k(n)*a),e=f[h],u=f[h+1],r=f[h+2],o=f[h+3],c=0;c<n;c++){for(s=0;s<i;s++)f[t]=e,f[t+1]=u,f[t+2]=r,f[t+3]=o,t+=4;t+=4*(a-i)}}return(1<c||1<l)&&d(u,c,l),this}},transparencyDisposal:{value:function(n,t,i,s,h){return n=255*Tt(n,1),this.forEach(function(t,i){t[i]>=n&&t[i+1]>=n&&t[i+2]>=n&&(t[i+3]=0)},this,t,i,s,h)}},reverseColor:{value:function(t,i,n,s){return this.forEach(function(t,i){t[i]=255-t[i],t[i+1]=255-t[i+1],t[i+2]=255-t[i+2]},this,t,i,n,s)}},greyProcessing:{value:function(t,i,n,s){return this.forEach(function(t,i){t[i]=t[i+1]=t[i+2]=.299*t[i]+.587*t[i+1]+.114*t[i+2]},this,t,i,n,s)}},blackWhite:{value:function(n,t,i,s,h){return n=Rt(n)?127:254*n,this.forEach(function(t,i){t[i]=t[i+1]=t[i+2]=(t[i]+t[i+1]+t[i+2])/3>n?255:0},this,t,i,s,h)}},relief:{value:function(){for(var t,i=this.Yn,n=this.ln,s=n-1,h=this.vn-1,e=4*n,u=0,r=0;r<h;r++){for(t=0;t<s;t++)i[u]=2*i[u]-i[u+4]-i[u+e]+127.5,i[u+1]=2*i[u+1]-i[u+5]-i[u+1+e]+127.5,i[u+2]=2*i[u+2]-i[u+6]-i[u+2+e]+127.5,u+=4;u+=4}for(u=4*s,r=0;r<h;r++)i[u]=i[u-4],i[u+1]=i[u-3],i[u+2]=i[u-2],u+=e;for(u=h*e,t=0;t<n;t++)i[u]=i[u-e],i[u+1]=i[u+1-e],i[u+2]=i[u+2-e],u+=4;return this}},sunGlass:{value:function(){for(var t,i=this.Yn,n=this.ln,s=n-1,h=this.vn-1,e=4*n,u=0,r=0;r<h;r++){for(t=0;t<s;t++)i[u]=2*i[u]-1.5*i[u+4],i[u+1]=2*i[u+1]-1.5*i[u+5],i[u+2]=2*i[u+2]-1.5*i[u+6],u+=4;u+=4}for(u=4*s,r=0;r<h;r++)i[u]=i[u-4],i[u+1]=i[u-3],i[u+2]=i[u-2],u+=e;for(u=h*e,t=0;t<n;t++)i[u]=i[u-e],i[u+1]=i[u+1-e],i[u+2]=i[u+2-e],u+=4;return this}},frostedGlass:{value:function(u){return u=Tt(u,8),this.forEach(function(t,i,n,s){var h=k(u),e=k(u);n+h>=this.right||s+e>=this.bottom||(e=i+4*(h+e*this.ln),t[i]=t[e],t[i+1]=t[e+1],t[i+2]=t[e+2],t[i+3]=t[e+3])},this)}},On:{get:function(){return Rt(this.Qn)||Rt(this.Ln)||Rt(this.Wn)||Rt(this.qn)}},Hn:{value:function(t,i,n){var s=this.zn;return s!=xt&&(this.On?t.putImageData(s,i,n):t.putImageData(s,i,n,this.Qn,this.Ln,this.Wn,this.qn)),this}},Gn:{value:function(){this.On?(Yt.width=this.ln,Yt.height=this.vn):(Yt.width=this.Wn,Yt.height=this.qn),this.Hn(Qt,0,0)}}});var Pi=function(t,i,n,s,h){t.t!==i&&(t.font=t.t=i),t.i!==n&&(t.textAlign=t.i=n),t.h!==s&&(t.textBaseline=t.h=s),t.u!==h&&(t.direction=t.u=h)},ci={Xi:{value:fi.prototype.Vi}};function ki(t,i,n,s,h,e){fi.call(this,t,i,h,e),this.text=Tt(n,""),this.maxWidth=s}t(ki,fi,ai,vi,ci,{text:{get:function(){return this.jn},set:function(t){this.jn=t}},maxWidth:{get:function(){return this.En},set:function(t){this.En=t}},metrics:{get:function(){return n(this.jn,this.t,this.Si,this.xi,this.u)}},width:{get:function(){return this.metrics.width*this.Nn}},actualBoundingBoxWidth:{get:function(){return this.metrics.actualBoundingBoxWidth*this.Nn}},actualBoundingBoxHeight:{get:function(){return this.metrics.actualBoundingBoxHeight}},un:{get:function(){return-this.metrics.actualBoundingBoxLeft*this.Nn}},cn:{get:function(){return-this.metrics.actualBoundingBoxAscent}},fn:{get:function(){return this.metrics.actualBoundingBoxRight*this.Nn}},an:{get:function(){return this.metrics.actualBoundingBoxDescent}},Nn:{get:function(){var t,i=this.En;return i!=xt&&i<(t=this.metrics.width)?i/t:1}},Ni:{value:ki.prototype.Ji},Fi:{value:function(){return this.Ci.fillText(this.jn,this.Bi,this.Di,this.En),this}},Qi:{value:function(){return this.Ci.strokeText(this.jn,this.Bi,this.Di,this.En),this}},qi:{value:function(){var t=this.Ci;return t.beginPath(),t.rect(this.left,this.top,this.actualBoundingBoxWidth,this.actualBoundingBoxHeight),t.clip(),this}},Yi:{value:function(){return fi.prototype.Yi.call(this).Jn()}},Li:{value:function(){return fi.prototype.Li.call(this).Jn()}},Wi:{value:function(){return fi.prototype.Wi.call(this).Jn()}},Jn:{value:function(){return Pi(this.updateTextStyle().Ci,this.t,this.Si,this.xi,this.u),this}}});ai={centerX:{get:function(){return this.Bi+this.en}},centerY:{get:function(){return this.Di+this.rn}},sn:{value:function(t,i){var n=this.centerX,s=this.centerY,h=this.radius;return(n-t)*(n-t)+(s-i)*(s-i)<=h*h}},hn:{value:function(t,i){var n=this.centerX,s=this.centerY;return 0===V((it((n-t)*(n-t)+(s-i)*(s-i))-this.radius)/this.fi)}}};function yi(t,i,n,s,h,e,u,r){fi.call(this,t,i,u,r),this.radius=Tt(n,0),this.startAngle=Tt(s,0),this.endAngle=Tt(h,ot),this.anticlockwise=Tt(e,!1)}function Si(t,i,n,s,h,e,u,r){yi.call(this,t,i,n,s,h,e,u,r)}t(yi,fi,ai,vi,N,{startAngle:{get:function(){return this.Mn},set:function(t){this.Mn=t}},endAngle:{get:function(){return this.Un},set:function(t){this.Un=t}},anticlockwise:{get:function(){return this.Kn},set:function(t){this.Kn=t}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}},buildPath:{value:function(t,i,n,s,h,e,u){t.beginPath(),t.arc(i,n,s,h,e,u)}}}),t(Si,yi,{buildPath:{value:function(t,i,n,s,h,e,u){yi.prototype.buildPath.call(this,t,i,n,s,h,e,u),t.lineTo(i,n),t.closePath()}}});vi={innerRadius:{get:function(){return this.Zn},set:function(t){this.Zn=t}}};function wi(t,i,n,s,h,e,u,r,o){yi.call(this,t,i,n,h,e,u,r,o),this.innerRadius=Tt(s,0)}function xi(t,i,n,s,h,e,u,r,o){yi.call(this,t,i,n,h,e,u,r,o),this.radiusY=Tt(s,0)}function Ii(t,i,n,s,h,e){fi.call(this,t,i,h,e),this.sides=Tt(s,3)}function Ri(t,i,n,s,h,e){Ii.call(this,t,i,n,s,h,e)}t(wi,yi,vi,{outerRadius:{get:function(){return this.gn},set:function(t){this.gn=t}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.outerRadius,this.innerRadius,this.startAngle,this.endAngle,this.anticlockwise)}},buildPath:{value:function(t,i,n,s,h,e,u,r){yi.prototype.buildPath.call(this,t,i,n,s,e,u,r),t.arc(i,n,h,u,e,!r),t.closePath()}}}),t(xi,yi,{radiusX:{get:function(){return this.gn},set:function(t){this.gn=t}},radiusY:{get:function(){return this.Vn},set:function(t){this.Vn=t}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise)}},buildPath:{value:function(t,i,n,s,h,e,u,r){t.beginPath(),t.ellipse(i,n,s,h,0,e,u,r)}},sn:{value:function(t,i){var n=this.Bi,s=this.Di,h=this.gn,e=this.Vn;return(t-n)*(t-n)*e/h+(i-s)*(i-s)*h/e<=h*e}},hn:{value:function(t,i){var n=this.Bi,s=this.Di,h=this.gn,e=this.Vn;return 0===V((it((t-n)*(t-n)*e/h+(i-s)*(i-s)*h/e)-it(h*e))/this.fi)}}}),t(Ii,fi,N,{sides:{get:function(){return this.$n},set:function(t){this.$n!==t&&(this.$n=t,this.ts=st(ot/t),this.ns=nt(ot/t))}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.radius,this.sides,this.ts,this.ns)}},buildPath:{value:function(t,i,n,s,h,e,u){var r,o=0,c=-s;t.beginPath(),t.moveTo(i+o,n+c);for(var f=0;f<h-1;f++)r=o*u+c*e,o=o*e-c*u,c=r,t.lineTo(i+o,n+c);t.closePath()}}}),t(Ri,Ii,vi,{sides:{get:function(){return this.$n},set:function(t){this.$n!==t&&(this.$n=t,this.ts=st(ot/t),this.ns=nt(ot/t),this.ss=st(rt/t),this.hs=nt(rt/t))}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.radius,this.sides,this.ts,this.ns,this.ss,this.hs,Rt(this.Zn)?this.gn/(4<this.$n?this.ss/this.ts:3):this.Zn)}},buildPath:{value:function(t,i,n,s,h,e,u,r,o,c){var f,a=s*u,l=-s*e,v=c*o,d=-c*r;t.beginPath();for(var g=0;g<2*h;g++)1&g?(t.lineTo(i+a,n+l),f=a*u+l*e,a=a*e-l*u,l=f):(t.lineTo(i+v,n+d),f=v*u+d*e,v=v*e-d*u,d=f);t.closePath()}}});var Ti=function(t,i,n,s,h,e){var u=(s-i)/3,r=(h-n)/3,o=i+u,c=n+r,f=o+(u+r*dt)/2,a=c+(r-u*dt)/2,u=i+2*u,r=n+2*r;--e?(Ti(t,i,n,o,c,e),Ti(t,o,c,f,a,e),Ti(t,f,a,u,r,e),Ti(t,u,r,s,h,e)):(t.lineTo(o,c),t.lineTo(f,a),t.lineTo(u,r),t.lineTo(s,h))};function Ci(t,i,n,s,h,e){Ii.call(this,t,i,n,s,h,e)}function Ai(t,i,n,s,h,e){fi.call(this,t,i,h,e),this.endX=Tt(n,0),this.endY=Tt(s,0)}function Bi(t,i,n,s,h,e,u,r){Ai.call(this,t,i,n,s,u,r),this.cp1x=h,this.cp1y=e}function Di(t,i,n,s,h,e,u,r,o,c){Bi.call(this,t,i,n,s,h,e,o,c),this.cp2x=u,this.cp2y=r}t(Ci,Ii,{sides:{get:function(){return this.$n},set:function(t){this.$n=P(t)}},buildPath:{value:function(t,i,n,s,h){var e,u=dt/2,r=s*u,o=-.5*-s,c=n-s;t.beginPath(),Ti(t,i,c,e=i+r,s=n+o,h),Ti(t,e,s,e=i+(-.5*r-o*u),s=n+(r*u+-.5*o),h),Ti(t,e,s,i,c,h),t.closePath()}}}),t(Ai,fi,{endX:{get:function(){return this.es},set:function(t){this.es=t}},endY:{get:function(){return this.us},set:function(t){this.us=t}},length:{get:function(){var t=this.es-this.Bi,i=this.us-this.Di;return it(t*t+i*i)}},angle:{get:function(){return et(this.us-this.Di,this.es-this.Bi)}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.endX,this.endY)}},buildPath:{value:function(t,i,n,s,h){t.beginPath(),t.moveTo(i,n),t.lineTo(s,h)}}}),t(Bi,Ai,{cp1x:{get:function(){return this.rs},set:function(t){this.rs=t}},cp1y:{get:function(){return this.os},set:function(t){this.os=t}},startAngle:{get:function(){return this.Mn}},endAngle:{get:function(){return this.Un}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.endX,this.endY,this.cp1x,this.cp1y,this.cs,this)}},buildPath:{value:function(t,i,n,s,h,e,u,r,o){var c,f,a,l,v,d,g,_,p,m=s-i,b=h-n,P=i-e,k=n-u;t.beginPath(),!r&&m*k-b*P>>0?(p=-(g=-(a=i*i+n*n)*(f=b+k)+(l=s*s+h*h)*k+(v=e*e+u*u)*b)/(d=i*f-n*(c=m+P)+s*u-e*h)/2,r=-(_=a*c-l*P-v*m)/d/2,P=c*k<f*P,t.arc(p,r,it((g*g+_*_-4*d*(a*(e*h-s*u)+l*(i*u-e*n)+v*(s*n-i*h)))/(4*d*d)),d=et(n-r,i-p),p=et(h-r,s-p),P),P?(d-=ft,p-=ft):(d+=ft,p+=ft)):(t.moveTo(i,n),t.lineTo(s,h),d=p=et(b,m)),o.Mn=d,o.Un=p}},cs:{get:function(){return Rt(this.rs)||Rt(this.os)}}}),t(Di,Bi,{cp2x:{get:function(){return this.fs},set:function(t){this.fs=t}},cp2y:{get:function(){return this.ls},set:function(t){this.ls=t}},startAngle:{get:function(){return this.cs?this.angle:et(this.os-this.Di,this.rs-this.Bi)}},endAngle:{get:function(){return this.cs?this.angle:this.vs?et(this.us-this.os,this.es-this.rs):et(this.us-this.ls,this.es-this.fs)}},centerAngle:{get:function(){return this.vs?this.angle:et(this.ls-this.os,this.fs-this.rs)}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.endX,this.endY,this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.cs,this.vs)}},buildPath:{value:function(t,i,n,s,h,e,u,r,o,c,f){t.beginPath(),t.moveTo(i,n),c?t.lineTo(s,h):f?t.quadraticCurveTo(e,u,s,h):t.bezierCurveTo(e,u,r,o,s,h)}},vs:{get:function(){return Rt(this.fs)||Rt(this.ls)}}});vi={length:{get:function(){return this.P},set:function(t){this.P=t}}};function Fi(t,i,n,s,h,e){fi.call(this,t,i,h,e),this.length=Tt(n,10),this.angle=Tt(s,at)}function Xi(t,i,n,s,h,e){Fi.call(this,t,i,n,s,h,e)}function Yi(t,i,n,s,h,e){Fi.call(this,t,i,n,s,h,e)}function Qi(t,i,n,s,h,e){Fi.call(this,t,i,n,s,h,e)}function Li(t,i,n,s,h){fi.call(this,t,i,s,h),this.path=n}function Wi(t,i,n,s,h,e){fi.call(this,t,i,h,e),this.points=Rt(n)?[]:n,this.length=Tt(s,0),this.ds=[],this.Yn=[]}function qi(t,i,n,s,h,e){Wi.call(this,t,i,n,s,h,e)}function zi(t,i,n,s,h,e){qi.call(this,t,i,n,s,h,e)}t(Fi,fi,vi,{angle:{get:function(){return this.gs},set:function(t){return this.gs!==(t=_(t,rt))&&(this.gs=t,this._s=ht(t/2)),this}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.length,this.angle,this._s)}},buildPath:{value:function(t,i,n,s,h,e){var u=i-s,e=-s*e;t.beginPath(),t.moveTo(u,n+e),t.lineTo(i,n),t.lineTo(u,n-e),t.closePath()}}}),t(Xi,Fi,{buildPath:{value:function(t,i,n,s,h,e){var u=i-s,r=i-s*(1-4*e/3),e=-s*e;t.beginPath(),t.moveTo(i,n),t.bezierCurveTo(r,n+3*e/2,u,n+e,u,n),t.bezierCurveTo(u,n-e,r,n-3*e/2,i,n),t.closePath()}}}),t(Yi,Fi,{buildPath:{value:function(t,i,n,s,h,e){var u=i-2*s/3,r=i-5*s/3,e=-s*e;t.beginPath(),t.moveTo(i,n),t.bezierCurveTo(u,n+2*e,r,n+e/2,i-s,n),t.bezierCurveTo(r,n-e/2,u,n-2*e,i,n),t.closePath()}}}),t(Qi,Fi,{buildPath:{value:function(t,i,n,s,h,e){var u=i-s,s=s*e,e=s*e;t.beginPath(),t.moveTo(u,n-s),t.lineTo(i,n),t.lineTo(u,n+s),t.arc(u-e,n,it(s*s+e*e),(rt-h)/2,(h-rt)/2,!1)}}}),t(Li,fi,ci,{path:{get:function(){var t=new Path2D;return t.addPath(this.ps,{e:-this.Bi,f:-this.Di}),t},set:function(t){return this.ps=new Path2D,this.addPath(t)}},addPath:{value:function(t){switch(E.call(t)){case"[object String]":this.ps.addPath(new Path2D(t),{e:this.Bi,f:this.Di});break;case"[object Path2D]":this.ps.addPath(t,{e:this.Bi,f:this.Di});break;case"[object Object]":this.ps.addPath(t.ps,{a:t.N,b:t.J,c:t.xt,d:t.yt,e:t.Rt+this.Bi,f:t.Ct+this.Di})}return this}},moveTo:{value:function(t,i){return this.ps.moveTo(this.Bi+t,this.Di+i),this}},lineTo:{value:function(t,i){return this.ps.lineTo(this.Bi+t,this.Di+i),this}},arcTo:{value:function(t,i,n,s,h){return this.ps.arcTo(this.Bi+t,this.Di+i,this.Bi+n,this.Di+s,h),this}},quadraticCurveTo:{value:function(t,i,n,s){return this.ps.quadraticCurveTo(this.Bi+t,this.Di+i,this.Bi+n,this.Di+s),this}},bezierCurveTo:{value:function(t,i,n,s,h,e){return this.ps.bezierCurveTo(this.Bi+t,this.Di+i,this.Bi+n,this.Di+s,this.Bi+h,this.Di+e),this}},rect:{value:function(t,i,n,s){return this.ps.rect(this.Bi+t,this.Di+i,n,s),this}},arc:{value:function(t,i,n,s,h,e){return this.ps.arc(this.Bi+t,this.Di+i,n,s,h,e),this}},ellipse:{value:function(t,i,n,s,h,e,u,r){return this.ps.ellipse(this.Bi+t,this.Di+i,n,s,h,e,u,r),this}},closePath:{value:function(){return this.ps.closePath(),this}},Fi:{value:function(t){return this.Ci.fill(this.ps,t),this}},Qi:{value:function(){return this.Ci.stroke(this.ps),this}},qi:{value:function(t){return this.Ci.clip(this.ps,t),this}},tn:{value:function(t,i){return this.Ci.isPointInPath(this.ps,t,i)}},nn:{value:function(t,i){return this.Ci.isPointInStroke(this.ps,t,i)}}}),t(Wi,fi,vi,At,{points:{get:function(){return this.bs},set:function(t){this.bs=new I(t,{set:function(t,i,n){return t[i]=n,this.Ps=!0}.bind(this)}),this.Ps=!0}},built:{get:function(){return this.ds}},append:{value:function(t,i){return this.bs.push(t,i),this.onappend(),this}},insert:{value:function(t,i,n){return this.bs.splice(2*t,0,i,n),this.onappend(),this}},delete:{value:function(t){return this.bs.splice(2*t,2),this.ondelete(),this}},update:{value:function(t,i,n){return this.bs[2*t]=i,this.bs[2*t+1]=n,this}},peek:{value:function(t,i){return this.bs[2*t+i]}},clear:{value:function(){return this.bs.length=0,this.onclear(),this}},onappend:zt,ondelete:zt,onclear:zt,hasChanged:Gt,rebuildPath:{value:function(){this.buildPath(this.context,this.built,this.length)}},buildPath:{value:function(t,i,n){t.beginPath()},writable:!0},rebuildPoints:{value:function(){this.buildPoints(this.startX,this.startY,this.points,this.length,this.built)}},buildPoints:zt,updateTransform:{value:function(){if(this.Ti()){var t,i,n,s=this.ds,h=this.Yn,e=this.P,u=this.N,r=this.J,o=this.xt,c=this.yt,f=this.Rt,a=this.Ct;if(1!==u||1!==c||0!==r||0!==o)for(t=0;t<e;t+=2)i=s[t],n=s[t+1],h[t]=i*u+n*o+f,h[t+1]=i*r+n*c+a;else if(0!==f||0!==a)for(t=0;t<e;t+=2)h[t]=s[t]+f,h[t+1]=s[t+1]+a;else for(t=0;t<e;t+=2)h[t]=s[t],h[t+1]=s[t+1]}return this}},Ti:{value:function(){var t=this.Ps,i=this.ks!==this.P&&(this.ks=this.ds.length=this.Yn.length=this.P,!0),n=(this.ys!==this.Bi||this.Ss!==this.Di)&&(this.ys=this.Bi,this.Ss=this.Di,!0),s=this.hasChanged(),h=fi.prototype.Ti.call(this);return this.Ps=!1,t||i||n||s?(this.rebuildPoints(),!0):h}}}),t(qi,Wi,{buildPath:{value:function(t,i,n){t.beginPath(),t.moveTo(i[0],i[1]);for(var s=2;s<n;s+=2)t.lineTo(i[s],i[s+1])}},buildPoints:{value:function(t,i,n,s,h){for(var e=0;e<s;e+=2)h[e]=t+n[e],h[e+1]=i+n[e+1]}}}),t(zi,qi,{buildPath:{value:function(t,i,n){qi.prototype.buildPath.call(this,t,i,n),t.closePath()}}});At={onclear:{value:function(){this.P=0}}},Gt=H({onappend:{value:function(){this.P+=2}},ondelete:{value:function(){this.P-=2}}},At);function Gi(t,i,n,s,h,e){qi.call(this,t,i,n,s,h,e)}function Hi(t,i,n,s,h,e){zi.call(this,t,i,n,s,h,e)}function Oi(t,i,n,s,h,e){qi.call(this,t,i,n,Tt(s,200),h,e)}t(Gi,qi,Gt),t(Hi,zi,Gt),t(Oi,qi,{buildPoints:{value:function(t,i,n,s,h){for(var e,u,r,o,c,f,a,l=n.length/2-1,v=0;v<s;v+=2){for(c=v/(s-2),e=r=u=0;e<n.length;e+=2)a=l,o=(0===(f=o=e/2)||f===a?1:1===f||a-f==1?a:Ct(a)/Ct(a-f)/Ct(f))*tt(c,o)*tt(1-c,l-o),u+=n[e]*o,r+=n[e+1]*o;h[v]=t+u,h[v+1]=i+r}}}});Gt={en:{get:function(){return this.bs[0]}},rn:{get:function(){return this.bs[1]}}};function ji(t,i,n,s,h,e){zi.call(this,t,i,n,Tt(s,8),h,e)}function Ei(t,i,n,s,h,e){zi.call(this,t,i,n,Tt(s,200),h,e)}function Ni(t,i,n,s,h,e,u){zi.call(this,t,i,n,Tt(s,200),e,u),this.exponent=h}function Ji(t,i,n,s,h,e,u){Wi.call(this,t,i,n,s,e,u),this.tension=h}t(ji,zi,li,Gt,{width:{get:function(){return this.bs[2]-this.bs[0]}},height:{get:function(){return this.bs[3]-this.bs[1]}},buildPoints:{value:function(t,i,n,s,h){for(var e=t+n[0],u=i+n[1],r=t+n[2],o=i+n[3],c=r-e,f=o-u,a=s/4,l=a+a,v=s-a,d=0;d<a;d+=2)h[d]=d/a*c,h[d+1]=u,h[d+a]=r,h[d+a+1]=d/a*f,h[d+l+1]=o,h[d+v]=e;for(d=0;d<a;d+=2)h[d+l]=r-h[d],h[d]+=e,h[d+v+1]=o-h[d+a+1],h[d+a+1]+=u}}}),t(Ei,zi,ai,Gt,{radius:{get:function(){var t=this.bs,i=t[2]-t[0],t=t[3]-t[1];return it(i*i+t*t)}},buildPoints:{value:function(t,i,n,s,h){var e,u,r=st(lt/s),o=nt(lt/s),c=n[0],f=n[1],a=n[2]-c,l=n[3]-f;for(c+=t,f+=i,u=0;u<s;u+=2)h[u]=c+a,h[u+1]=f+l,e=l*r+a*o,a=a*r-l*o,l=e}}}),t(Ni,zi,{exponent:{get:function(){return this.ws},set:function(t){this.ws=Tt(t,3)}},hasChanged:{value:function(){return this.xs!==this.ws&&(this.xs=this.ws,!0)}},rebuildPoints:{value:function(){this.buildPoints(this.startX,this.startY,this.points,this.length,this.exponent,this.built)}},buildPoints:{value:function(t,i,n,s,h,e){var u,r,o=s/4,c=n[0],f=n[1],a=n[2]-c,l=n[3]-f,v=it(a*a+l*l),d=a/v,g=l/v;for(c+=t,f+=i,u=0;u<o;u+=2)a=v*tt(st(r=u/o*ft),2/h),l=v*tt(nt(r),2/h),e[u]=a*d-l*g,e[u+1]=l*d+a*g;for(u=o;u<s;u+=2)e[u]=-e[u-o+1],e[u+1]=e[u-o],e[u-o]+=c,e[u-o+1]+=f;for(u=3*o;u<s;u+=2)e[u]+=c,e[u+1]+=f}}}),t(Ji,Wi,At,{tension:{get:function(){return this.Is},set:function(t){this.Is=Tt(t,1)}},onappend:{value:function(){0!==this.P?this.P+=6:this.P=2}},ondelete:{value:function(){2<this.P?this.P-=6:this.P=0}},hasChanged:{value:function(){return this.Rs!==this.Is&&(this.Rs=this.Is,!0)}},rebuildPoints:{value:function(){this.buildPoints(this.startX,this.startY,this.points,this.length,this.tension,this.built)}},buildPoints:{value:function(t,i,n,s,h,e){for(var u,r,o,c,f,a,l,v=0,d=0,g=e[0]=t+n[0],_=e[1]=i+n[1],p=n.length,m=2;m<p&&(l=3*m-4)<s;m+=2)o=t+n[m],c=i+n[m+1],f=t+n[m+2],a=i+n[m+3],f==f?(u=(f-g)/6*h,r=(a-_)/6*h):u=r=0,e[l]=g+v,e[l+1]=_+d,e[l+2]=o-u,e[l+3]=c-r,v=u,d=r,g=e[l+4]=o,_=e[l+5]=c}},buildPath:{value:function(t,i,n){t.beginPath(),t.moveTo(i[0],i[1]);for(var s=2;s<n;s+=6)t.bezierCurveTo(i[s],i[s+1],i[s+2],i[s+3],i[s+4],i[s+5])}}});var Mi=new R(function(t){t.forEach(function(t){var i,n,s,h=t.target,e=h.Ts,u=h.getBoundingClientRect(),r=u.left%1,t=u.top%1,o=u.right-(h.Cs=u.left),c=u.bottom-(h.As=u.top);for(h.style.left=(r<.5?-r:1-r)+"px",h.style.top=(t<.5?-t:1-t)+"px",i=0;i<e.length;i++)s=(n=e[i]).Ci.Zi,(1<=$((n.ln-o)*s)||1<=$((n.vn-c)*s))&&n.resize(o,c)})}),Ui=new T(function(t){t.forEach(function(t){var i,n=t.target,s=n.Ts,h=t.isIntersecting;if(n.Bs!==h)for(n.Bs=h,i=0;i<s.length;i++)s[i].onvisibilitychange(h)})}),T={Ds:{value:function(t,i){var n=this.Fs;return f(n)&&(n=this.Fs={}),f(n[t])&&(n[t]=[],this.onregister(t)),-1===(t=n[t]).indexOf(i)&&t.push(i),this}},Xs:{value:function(t,i){var n=this.Fs[t],i=n.indexOf(i);return-1!==i&&(1!==n.length?n.splice(i,1):(delete this.Fs[t],this.onunregister(t))),this}},Ys:{value:function(t,i){j(i,this.Qs);for(var n=this.Fs[t],s=n.length;0<s&&(n[--s].call(this,i),!i.it););return this}},Qs:{value:{stop:{value:function(){this.it=!0}},it:{value:!1,writable:!0}}},Ls:{value:function(t){return u(this.Fs)&&u(this.Fs[t])}}},Ki=H({Ws:{value:["mousedown","mousemove","mouseup","mouseenter","mouseleave","mouseover","mouseout","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointercancel","pointerenter","pointerleave","pointerover","pointerout","gotpointercapture","lostpointercapture","click","dblclick","contextmenu","wheel","focus","blur","focusin","focusout","keydown","keyup","keypress"]},qs:{value:{mousedown:function(t){this.Ys(this.Ws[0],this.zs(this.Gs(t),""))},mousemove:function(t){this.Ys(this.Ws[1],this.Hs(this.Gs(t),""))},mouseup:function(t){this.Ys(this.Ws[2],this.Gs(t))},mouseenter:function(t){this.Ys(this.Ws[3],this.zs(this.Gs(t),""))},mouseleave:function(t){this.Ys(this.Ws[4],this.Gs(t))},mouseover:function(t){this.Ys(this.Ws[5],this.Gs(t))},mouseout:function(t){this.Ys(this.Ws[6],this.Gs(t))},touchstart:function(t){for(var i,n=0,s=t.targetTouches,h=s.length;n<h;n++)i=s[n],this.zs(this.Os(i),i.identifier);this.Ys(this.Ws[7],t)},touchmove:function(t){for(var i,n=0,s=t.targetTouches,h=s.length;n<h;n++)i=s[n],this.Hs(this.Os(i),i.identifier);this.Ys(this.Ws[8],t)},touchend:function(t){for(var i=0,n=t.targetTouches,s=n.length;i<s;i++)this.Os(n[i]);this.Ys(this.Ws[9],t)},touchcancel:function(t){this.Ys(this.Ws[10],t)},pointerdown:function(t){this.setPointerCapture(t.pointerId),this.Ys(this.Ws[11],this.zs(this.Gs(t),t.pointerId))},pointermove:function(t){this.Ys(this.Ws[12],this.Hs(this.Gs(t),t.pointerId))},pointerup:function(t){this.releasePointerCapture(t.pointerId),this.Ys(this.Ws[13],this.Gs(t))},pointercancel:function(t){this.Ys(this.Ws[14],this.Gs(t))},pointerenter:function(t){this.Ys(this.Ws[15],this.zs(this.Gs(t),t.pointerId))},pointerleave:function(t){this.Ys(this.Ws[16],this.Gs(t))},pointerover:function(t){this.Ys(this.Ws[17],this.Gs(t))},pointerout:function(t){this.Ys(this.Ws[18],this.Gs(t))},gotpointercapture:function(t){this.Ys(this.Ws[19],this.Gs(t))},lostpointercapture:function(t){this.Ys(this.Ws[20],this.Gs(t))},click:function(t){this.Ys(this.Ws[21],this.Gs(t))},dblclick:function(t){this.Ys(this.Ws[22],this.Gs(t))},contextmenu:function(t){t.preventDefault(),this.Ys(this.Ws[23],this.Gs(t))},wheel:function(t){this.Ys(this.Ws[24],this.Gs(j(t,{zooming:{value:tt(2,-(t.deltaY||t.deltaX)/100)}})))},focus:function(t){this.Ys(this.Ws[25],t)},blur:function(t){this.Ys(this.Ws[26],t)},focusin:function(t){this.Ys(this.Ws[27],t)},focusout:function(t){this.Ys(this.Ws[28],t)},keydown:function(t){t.isComposing||"Process"===t.key||this.Ys(this.Ws[29],t)},keyup:function(t){t.isComposing||"Process"===t.key||this.Ys(this.Ws[30],t)},keypress:function(t){this.Ys(this.Ws[31],t)}}},js:{value:{passive:!1}},Es:{value:function(t){return"touchmove"===t?"touchstart":"mousemove"===t?"mouseenter":"pointermove"===t?"pointerenter":"gotpointercapture"===t||"lostpointercapture"===t?"pointerdown":""}},Gs:{value:function(t){return j(t,{x:{value:t.offsetX},y:{value:t.offsetY}})}},Os:{value:function(t){return j(t,{x:{value:t.pageX-this.Cs},y:{value:t.pageY-this.As}})}},zs:{value:function(t,i){return this["__x"+i]=this["_x"+i]=t.x,this["__y"+i]=this["_y"+i]=t.y,t}},Hs:{value:function(t,i){return j(t,{moveX:{value:t.x-this["__x"+i]},moveY:{value:t.y-this["__y"+i]},movementX:{value:t.x-this["_x"+i]},movementY:{value:t.y-this["_y"+i]}}),this["_x"+i]=t.x,this["_y"+i]=t.y,t}},onregister:{value:function(t){this.addEventListener(t,this.qs[t],this.js)}},onunregister:{value:function(t){this.removeEventListener(t,this.qs[t],this.js)}}},T),T=O(H({__proto__:xt,on:{value:function(t,i){return r(i)?this.Ds(t,i):this}},off:{value:function(t,i){return this.Ls(t)?this.Xs(t,i):this}},trigger:{value:function(t,i){return this.Ls(t)?this.Ys(t,l(i)?i:{}):this}},onregister:zt,onunregister:zt},T)),Zi=hi,Vi=Q;function $i(t,i,n,s,h,e){var u,r,o;l(t)&&(i=t.width,n=t.height,s=t.pixelRatio,h=t.duration,e=t.interval,t=t.container),Zi.call(this,h,e),t=this.Ns=a(t)?W.querySelector(t):t,Rt(t)||(f(this.Js=t.children[0])&&t.appendChild(this.Js=W.createElement("div")),u=this.Js,f(u.Ts)&&(u.Ts=[],u.tabIndex=0,j(u,Ki),(r=u.style).position="relative",r.overflow="hidden",r.borderWidth=r.padding=r.margin="0px",r.webkitUserSelect=r.userSelect=r.touchAction=r.outline="none",u.Bs=!1,u.Ms=function(){if(u.Bs)for(var t=u.Ts,i="visible"===W.visibilityState,n=0;n<t.length;n++)t[n].onvisibilitychange(i)}),this.width=i,this.height=n,(r=(n=this.Us=W.createElement("canvas")).style).position="absolute",r.pointerEvents="none",r.top=r.left="0px",(r=u.Ts).length?u.insertBefore(n,r[r.length-1].Us.nextSibling):u.appendChild(n),r.push(this),this.Ci=j(n.getContext("2d",gt),{Zi:{writable:!0},Gi:{value:[]}}),this.Zi=s,this.Ks(),o=this,Vi(function(){o.oncreate(),o.onresize(),o.onrender()}),1===r.length?(Mi.observe(u),Ui.observe(u),W.addEventListener("visibilitychange",u.Ms,!1)):u.Bs&&!W.hidden&&Vi(function(){o.onvisibilitychange(!0)}),this.qs={},this.on("contextmenu",c))}f(Q)&&(Zi=si,Vi=F),t($i,Zi,{container:{get:function(){return this.Ns}},wrapper:{get:function(){return this.Js}},canvas:{get:function(){return this.Us}},context:{get:function(){return this.Ci}},width:{get:function(){return this.ln},set:function(t){this.Js.style.width=Rt(t)?"100%":t+"px"}},height:{get:function(){return this.vn},set:function(t){this.Js.style.height=Rt(t)?"100%":t+"px"}},pixelRatio:{get:function(){return this.Ci.Zi},set:function(t){this.Zi=t,this.Ks(this.ln,this.vn).onrender()}},visible:{get:function(){return this.Js.Bs}},cursor:{get:function(){return this.Js.style.cursor},set:function(t){this.Js.style.cursor=t}},resize:{value:function(t,i){return this.Ks(t,i).onresize(),this.onrender(),this}},render:{value:function(t){return t?(this.isRunning()||this.onrender(),this):this.resume()}},clearRect:{value:function(t,i,n,s){return this.$i().Ci.clearRect(t,i,n,s),this}},destroy:{value:function(){var t,i=this.Js,n=this.qs,s=i.Ts;for(t in n)i.Xs(t,n[t]);for(t in this.stop(),i.removeChild(this.Us),s.splice(s.indexOf(this),1),0===s.length&&(Mi.unobserve(i),Ui.unobserve(i),i.Bs=!1,W.removeEventListener("visibilitychange",i.Ms,!1)),this.ondestroy(),this)delete this[t];return this}},on:{value:function(t,s){var i,n,h=this.Js,e=r(s);return-1!==h.Ws.indexOf(t)?(i=this.qs,u(i[t])?(h.Xs(t,i[t]),delete i[t]):!e||(n=h.Es(t))&&f(i[n])&&h.Ds(n,i[n]=c),e&&h.Ds(t,i[t]=s.bind(this))):this["on"+t]="update"===t?e?function(t,i,n){s.call(this,t,i,n),this.onrender()}:delete this.onupdate:e?s:c,this}},create:{value:function(t,i,n){if(a(t)&&(t=dopa[t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()]),l(t))return j({},t);if(!r(t)||t===$i)return xt;var s=new t;return this.m(s),l(i)?Rt(n)?H(s,i):((i=x.call(arguments,1)).unshift(s),H.apply(xt,i)):1<arguments.length&&t.apply(s,x.call(arguments,1)),s}},onupdate:{value:function(t,i,n){this.onrender()},writable:!0},oncreate:zt,onresize:zt,onrender:zt,onvisibilitychange:zt,ondestroy:zt,m:{value:function(t){t.Ai?t.context=this.Ci:Zi.prototype.m.call(this,t)}},k:{value:function(t){t.context===this.Ci?t.context=It:Zi.prototype.k.call(this,t)}},Ks:{value:function(t,i){var n,s=this.Us,h=this.Ci,e=h.Zi=this.Zi||S.devicePixelRatio||1;return(Rt(t)||Rt(i))&&(n=this.Js.getBoundingClientRect(),Rt(t)&&(t=n.right-n.left),Rt(i)&&(i=n.bottom-n.top)),s.style.width=(this.ln=(s.width=V(t*e))/e)+"px",s.style.height=(this.vn=(s.height=V(i*e))/e)+"px",h.Gi.length=0,this.$i().Zs()}},$i:{value:function(){var t=this.Ci,i=t.Zi;return 1!==i?t.setTransform(i,0,0,i,0,0):t.resetTransform(),ui(t),this}},Zs:{value:function(){var t=this.Ci;return t.Hi=1,t.Oi=_t,t.Nt=pt,t.Mt=0,t.Kt=mt,t.Vt=0,t.ti=0,t.ni=bt,t.hi=Pt,t.ui=kt,t.oi=0,t.fi=1,t.li="butt",t.di="miter",t._i=10,i(t),t.ji=!0,t.Ei="low",this}}});zt=O({__proto__:xt,Roundrect:_i,Imagedata:bi,Polyshape:Wi,Superellipse:Ni,Smoothline:Ji});return O({__proto__:zt,util:Ht,Rgb:Kt,Hsl:Zt,Lab:$t,Point:ti,Animation:Zi,Animator:ei,Group:oi,Shape:fi,Rect:di,Grid:gi,RoundRect:_i,Image:pi,Wave:mi,ImageData:bi,Text:ki,Arc:yi,Sector:Si,Ring:wi,Ellipse:xi,Isogon:Ii,Star:Ri,Koch:Ci,Line:Ai,Curve:Di,Edge:Bi,Triangle:Fi,Droplet:Xi,Heart:Yi,Pin:Qi,Path:Li,PolyShape:Wi,Polyline:Gi,Polygon:Hi,Bezier:Oi,Rectangle:ji,Circle:Ei,SuperEllipse:Ni,SmoothLine:Ji,Canvas:$i,Eventful:T})});
