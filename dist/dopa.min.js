// https://github.com/JarenChow/dopa v1.2.3 Created by JarenChow in 2021
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t="undefined"!=typeof globalThis?globalThis:t||self).dopa=i()}(this,function(){"use strict";function i(t){t.t=yt,t.i="start",t.h=St,t.u="ltr"}function u(){return this}function g(t){return t!=It}function _(t){return t===Rt}function r(t){return t!==Rt}function a(t){return"string"==typeof t}function o(t){return"function"==typeof t}function c(t){return t!=It&&"object"==typeof t}function t(t,i){o(i)&&i!==G&&(t.prototype=H(i.prototype,{constructor:{value:t}}));for(var n=2;n<arguments.length;n++)E(t.prototype,arguments[n])}function n(t,i,n,s,h){var e=i+" "+n+" "+s+" "+h,u=Wt.get(e);return _(u)&&(u=new Bt(3755),Wt.set(e,u)),e=u.get(t),_(e)&&(Si(Qt,i,n,s,h),e=Qt.measureText(t),u.set(t,E(e,{actualBoundingBoxWidth:{value:e.actualBoundingBoxLeft+e.actualBoundingBoxRight},actualBoundingBoxHeight:{value:e.actualBoundingBoxAscent+e.actualBoundingBoxDescent}}))),e}function f(t,i){return n(t,i,Qt.i,Qt.h,Qt.u).width}function s(t,i,n){var s=qt.get(t);function h(){s.addEventListener("load",e),s.addEventListener("error",e)}function e(t){s.removeEventListener("load",e),s.removeEventListener("error",e),u("load"===t.type)}function u(t){i.call(n,s,t)}_(s)?(qt.set(t,s=z.createElement("img")),h(),s.src=t):s.complete?s.width?u(!0):(h(),s.src=t):h()}function h(t,i,n,s){return Qt.createLinearGradient(t,i,n,s)}function l(t,i,n,s,h,e){return Qt.createRadialGradient(t,i,n,s,h,e)}function e(t,i,n){return Qt.createConicGradient(t,i,n)}function v(t,i){return Qt.createPattern(t,Ct(i,"repeat"))}function d(t,i){return t%i+(t<0)*i}function p(t,i){return i<t?t:i}function b(t,i){return t<i?t:i}function m(t,i,n){return p(b(t,n),i)}function P(t){return xt<t||t<-xt}function k(t){return P(t)?t:t<0?-xt:xt}function w(t){return 0<(t=~~t)?t:1}function y(t,i,n){return Tt(i)&&(i=t,t=0),t+Z(rt()*(i-t+(n||0)))}function S(t,i,n){return t+(i-t)*n}var x=window,I=x.Map,R=x.Array.prototype.slice,T=x.Proxy,C=x.ResizeObserver,A=x.IntersectionObserver,X=x.ImageData,Y=x.encodeURI,B=x.parseFloat,D=x.parseInt,F=x.setTimeout,L=x.setInterval,Q=x.clearInterval,W=x.requestAnimationFrame,q=x.cancelAnimationFrame,z=document,G=Object,H=G.create,O=G.assign,j=G.freeze,E=G.defineProperties,N=G.prototype.toString,J=Math,M=J.min,U=J.max,K=J.sign,Z=J.floor,V=J.ceil,$=J.round,tt=J.abs,it=J.pow,nt=J.sqrt,st=J.sin,ht=J.cos,et=J.tan,ut=J.atan2,rt=J.random,ot=J.PI,ct=2*ot,ft=2*ot/3,at=ot/2,lt=ot/3,vt=4*ot,dt=vt/9,gt=nt(3),_t={alpha:!0,colorSpace:"srgb",desynchronized:!1},pt="source-over",bt="none",mt="rgba(0, 0, 0, 0)",Pt="#000000",kt="#000000",wt=[],yt="10px sans-serif",St="alphabetic",xt=it(2,-14),It=null,Rt=void 0,Tt=function(t){return t==It},Ct=function(t,i){return Tt(t)?i:t},At=function(t){switch(t){case 9:return 362880;case 8:return 40320;case 7:return 5040;case 6:return 720;case 5:return 120;case 4:return 24;case 3:return 6;case 2:return 2;case 1:case 0:return 1}return t*At(t-1)},Xt={o:{value:function(t){return _(this.l)?this.l=this.v=t:this.v=(t._=this.v).g=t,this}},p:{value:function(t){var i=t._,n=t.g;return r(i)?i.g=n:this.l=n,r(n)?n._=i:this.v=i,t._=t.g=Rt,this}}},Yt=O({m:{value:function(t){return this.P++,this.o(t)}},k:{value:function(t){return this.P--,this.p(t)}},S:{value:function(){return this.l=this.v=Rt,this.P=0,this}}},Xt),Bt=(t(Dt,G,{length:{get:function(){return this.I.P}},get:{value:function(t){var i=this.R.get(t);if(r(i)){t=this.I;return i!==t.v&&(t.k(i),t.m(i)),i.T}}},set:{value:function(t,i){var n,s,h,e=this.R;_(e.get(t))&&(h=(n=this.I).P,s=this.C,h>=this.A&&0<h&&(h=n.l,n.k(h),e.delete(h.X),this.C=h),s?s.T=i:s={T:i},s.X=t,n.m(s),e.set(t,s))}},clear:{value:function(){this.I.S(),this.R.clear()}}}),Dt);function Dt(t){this.I=E({},Yt).S(),this.R=new I,this.A=Ct(t,10)}var Ft=j({__proto__:It,in:j({__proto__:It,linear:function(t){return t},sinusoidal:function(t){return 1-ht(t*at)},quadratic:function(t){return t*t},cubic:function(t){return t*t*t},quartic:function(t){return t*t*t*t},quintic:function(t){return t*t*t*t*t},exponential:function(t){return 0===t?0:it(1024,t-1)},circular:function(t){return 1-nt(1-t*t)},back:function(t){return t*t*(2.70158*t-1.70158)},elastic:function(t){return 0===t?0:1===t?1:-it(1024,t-1)*st((10*t-10.75)*ft)},bounce:function(t){var i=7.5625,n=2.75;return(t=1-t)<1/n?1-i*t*t:t<2/n?.25-i*(t-=1.5/n)*t:t<2.5/n?.0625-i*(t-=2.25/n)*t:.015625-i*(t-=2.625/n)*t}}),out:j({__proto__:It,linear:function(t){return t},sinusoidal:function(t){return st(t*at)},quadratic:function(t){return t*(2-t)},cubic:function(t){return--t*t*t+1},quartic:function(t){return 1- --t*t*t*t},quintic:function(t){return--t*t*t*t*t+1},exponential:function(t){return 1===t?1:1-it(1024,-t)},circular:function(t){return nt(1- --t*t)},back:function(t){return--t*t*(2.70158*t+1.70158)+1},elastic:function(t){return 0===t?0:1===t?1:it(1024,-t)*st((10*t-.75)*ft)+1},bounce:function(t){var i=7.5625,n=2.75;return t<1/n?i*t*t:t<2/n?i*(t-=1.5/n)*t+.75:t<2.5/n?i*(t-=2.25/n)*t+.9375:i*(t-=2.625/n)*t+.984375}}),inout:j({__proto__:It,linear:function(t){return t},sinusoidal:function(t){return(1-ht(t*ot))/2},quadratic:function(t){return t<.5?2*t*t:1-2*--t*t},cubic:function(t){return t<.5?4*t*t*t:1+4*--t*t*t},quartic:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},quintic:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},exponential:function(t){return 0===t?0:1===t?1:t<.5?it(1024,2*t-1)/2:1-it(1024,1-2*t)/2},circular:function(t){return t<.5?(1-nt(1-4*t*t))/2:(nt(1-4*--t*t)+1)/2},back:function(t){var i=2.5949095;return t<.5?2*t*t*(7.189819*t-i):2*--t*t*((1+i)*t*2+i)+1},elastic:function(t){return 0===t?0:1===t?1:t<.5?-(it(1024,2*t-1)*st((20*t-11.125)*dt))/2:it(1024,1-2*t)*st((20*t-11.125)*dt)/2+1},bounce:function(t){return t<.5?(1-Ft.out.bounce(1-2*t))/2:(1+Ft.out.bounce(2*t-1))/2}})}),Lt=z.createElement("canvas"),Qt=Lt.getContext("2d",_t);i(Qt);var Wt=new I,qt=new Bt(50),zt=z.createElement("a"),Gt={value:u,writable:!0},Ht={value:function(){return!1},writable:!0},Ot=j({__proto__:It,ease:Ft,noop:u,extends:t,measureText:n,measureTextWidth:f,measureTextFontSize:function(e,u,r,t,i){return 0===e.length||0===u?0:(Tt(t)&&(t=Z(u/e.length)),Tt(i)&&(i=V(u/e.length*4)),function t(i,n){{if(i===n)return i;if(i+1===n)return f(e,n+"px "+r)>u?i:n}var s=Z((i+n)/2),h=f(e,s+"px "+r);return u<h?t(i,s-1):h<u?t(s,n):s}(t,i))},loadImage:s,createLinearGradient:h,createRadialGradient:l,createConicGradient:e,createPattern:v,normalizeNumber:d,limitNumber:m,isNotAroundZero:P,saveURL:function(t,i){zt.href=t,zt.download=i,zt.click()},randInt:y,lerp:S});function jt(t){this.alpha=Ct(t,255)}t(jt,G,{alpha:{get:function(){return this.Y},set:function(t){this.Y=m(t,0,255)}},fromString:{value:function(t){return this.alpha=255*(_(t)?1:B(t)),this}},toString:{value:function(){return $(this.Y)/255+""}}});function Et(t){return.04045<(t/=255)?it((t+.055)/1.055,2.4):t/12.92}function Nt(t){return 255*(.0031308<t?1.055*it(t,1/2.4)-.055:12.92*t)}function Jt(t){return 6/29<t?t*t*t:18/29*6/29*(t-4/29)}function Mt(t){return(t<16?"0":"")+t.toString(16)}function Ut(t,i,n,s){s.red=S(t.red,i.red,n),s.green=S(t.green,i.green,n),s.blue=S(t.blue,i.blue,n)}var Kt=function(t,i,n,s,h){4===arguments.length?Ut(t,i,255/(s.alpha=n),s):5===arguments.length&&Kt(t,i,$(255*(1-(i.red-s.red)/(t.red-n.red)))||$(255*(1-(i.green-s.green)/(t.green-n.green)))||$(255*(1-(i.blue-s.blue)/(t.blue-n.blue)))||128,h)};function Zt(t,i,n,s){jt.call(this,s),this.red=Ct(t,0),this.green=Ct(i,0),this.blue=Ct(n,0)}function Vt(t,i,n,s){jt.call(this,s),this.hue=Ct(t,0),this.saturation=Ct(i,1),this.lightness=Ct(n,.5)}E(Zt,{mixing:{value:Ut},gammaMixing:{value:function(t,i,n,s){Ut(t,i,n,s);var h=s.red+s.green+s.blue;0!==h&&(t=it(t.red+t.green+t.blue,.43),i=it(i.red+i.green+i.blue,.43),n=it(t+(i-t)*n,1/.43),s.red*=n/h,s.green*=n/h,s.blue*=n/h)}},extract:{value:Kt}}),t(Zt,jt,{red:{get:function(){return this.B},set:function(t){this.B=m(t,0,255)}},green:{get:function(){return this.D},set:function(t){this.D=m(t,0,255)}},blue:{get:function(){return this.F},set:function(t){this.F=m(t,0,255)}},fromString:{value:function(t){t=/rgba?\((\d{1,3}), ?(\d{1,3}), ?(\d{1,3}),? ?([0,1]\.?\d*)?\)/.exec(t);return this.red=B(t[1]),this.green=B(t[2]),this.blue=B(t[3]),jt.prototype.fromString.call(this,t[4])}},fromHex:{value:function(t){t=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/.exec(t);return this.red=D(t[1],16),this.green=D(t[2],16),this.blue=D(t[3],16),this.alpha=_(t[4])?255:D(t[4],16),this}},fromHsl:{value:function(t){var i,n,s=d(t.hue,360),h=t.saturation,e=t.lightness,u=(1-tt(2*e-1))*h,h=u*(1-tt(s/60%2-1)),e=e-u/2,h=s<60?(i=u,n=h,0):s<120?(i=h,n=u,0):s<180?(i=0,n=u,h):s<240?(i=0,n=h,u):s<300?(i=h,n=0,u):(i=u,n=0,h);return this.red=255*(i+e),this.green=255*(n+e),this.blue=255*(h+e),this.alpha=t.alpha,this}},fromLab:{value:function(t){var i=(t.lightness+16)/116,n=.96422*Jt(i+t.a/500),s=Jt(i),i=.82521*Jt(i-t.b/200);return this.red=3.1338561*n-1.6168667*s-.4906146*i,this.green=-.9787684*n+1.9161415*s+.033454*i,this.blue=.0719453*n-.2289914*s+1.4052427*i,this.alpha=t.alpha,this.companding()}},inverseCompanding:{value:function(){return this.B=Et(this.B),this.D=Et(this.D),this.F=Et(this.F),this}},companding:{value:function(){return this.red=Nt(this.B),this.green=Nt(this.D),this.blue=Nt(this.F),this}},toString:{value:function(t){return"rgb"+(t?"a":"")+"("+$(this.B)+", "+$(this.D)+", "+$(this.F)+(t?", "+jt.prototype.toString.call(this):"")+")"}},toHex:{value:function(t){return"#"+Mt($(this.B))+Mt($(this.D))+Mt($(this.F))+(t?Mt($(this.Y)):"")}}}),t(Vt,jt,{hue:{get:function(){return this.L},set:function(t){this.L=t}},saturation:{get:function(){return this.W},set:function(t){this.W=m(t,0,1)}},lightness:{get:function(){return this.q},set:function(t){this.q=m(t,0,1)}},fromString:{value:function(t){t=/hsla?\((\d{1,3}\.?\d*), ?(\d{1,3}\.?\d*)%, ?(\d{1,3}\.?\d*)%,? ?([0,1]\.?\d*)?\)/.exec(t);return this.hue=B(t[1]),this.saturation=B(t[2])/100,this.lightness=B(t[3])/100,jt.prototype.fromString.call(this,t[4])}},fromRgb:{value:function(t){var i=t.red/255,n=t.green/255,s=t.blue/255,h=U(i,n,s),e=M(i,n,s),u=0,r=h-e,e=h+e;return r&&(u=i===h?(n-s)/r+6*(n<s):n===h?(s-i)/r+2:(i-n)/r+4,u*=60,r/=e<1?e:2-e),this.hue=u,this.saturation=r,this.lightness=e/2,this.alpha=t.alpha,this}},toString:{value:function(t){return"hsl"+(t?"a":"")+"("+this.L+", "+100*this.W+"%, "+100*this.q+"%"+(t?", "+jt.prototype.toString.call(this):"")+")"}}});function $t(t){return 6/29*6/29*6/29<t?it(t,1/3):t/(18/29*6/29)+4/29}function ti(t,i,n,s){jt.call(this,s),this.lightness=Ct(t,0),this.a=Ct(i,0),this.b=Ct(n,0)}function ii(t,i){this.x=Ct(t,0),this.y=Ct(i,0)}function ni(t,i){this.duration=t,this.interval=i}function si(t,i){ni.call(this,t,i),this.G=Rt,this.H=this.O.bind(this),this.j()}function hi(t,i){si.call(this,t,Ct(i,16))}function ei(t,i){si.call(this,t,i)}t(ti,jt,{lightness:{get:function(){return this.q},set:function(t){this.q=m(t,0,100)}},a:{get:function(){return this.N},set:function(t){this.N=m(t,-128,127)}},b:{get:function(){return this.J},set:function(t){this.J=m(t,-128,127)}},fromString:{value:function(t){t=/laba?\((\d{1,3}\.?\d*), ?(-?\d{1,3}\.?\d*), ?(-?\d{1,3}\.?\d*),? ?([0,1]\.?\d*)?\)/.exec(t);return this.lightness=B(t[1]),this.a=B(t[2]),this.b=B(t[3]),jt.prototype.fromString.call(this,t[4])}},fromRgb:{value:function(t){var i=Et(t.red),n=Et(t.green),s=Et(t.blue),h=$t(.2225045*i+.7168786*n+.0606169*s);return this.lightness=116*h-16,this.a=500*($t((.4360747*i+.3850649*n+.1430804*s)/.96422)-h),this.b=200*(h-$t((.0139322*i+.0971045*n+.7141733*s)/.82521)),this.alpha=t.alpha,this}},toString:{value:function(t){return"lab"+(t?"a":"")+"("+this.q+", "+this.N+", "+this.J+(t?", "+jt.prototype.toString.call(this):"")+")"}}}),t(ii,G,{x:{get:function(){return this.M},set:function(t){this.M=t}},y:{get:function(){return this.U},set:function(t){this.U=t}},set:{value:function(t,i){return this.x=t,this.y=i,this}},skew:{value:function(t,i){i=this.y+this.x*et(i);return this.x+=this.y*et(t),this.y=i,this}},scale:{value:function(t,i){return this.x*=t,this.y*=i,this}},rotate:{value:function(t){var i=ht(t),n=st(t),t=this.x*n+this.y*i;return this.x=this.x*i-this.y*n,this.y=t,this}},translate:{value:function(t,i){return this.x+=t,this.y+=i,this}},transform:{value:function(t,i,n,s,h,e){c(t)&&(i=t.b,n=t.c,s=t.d,h=t.e,e=t.f,t=t.a);e=this.x*i+this.y*s+e;return this.x=this.x*t+this.y*n+h,this.y=e,this}},unit:{value:function(){var t=nt(this.x*this.x+this.y*this.y);return t?(this.x/=t,this.y/=t):this.x=this.y=0,this}},inverse:{value:function(){return this.x=-this.x,this.y=-this.y,this}},vertical:{value:function(){var t=this.x;return this.x=-this.y,this.y=t,this}},add:{value:function(t){return this.x+=t.x,this.y+=t.y,this}},subtract:{value:function(t){return this.x-=t.x,this.y-=t.y,this}},multiply:{value:function(t){var i=this.x*t.y+this.y*t.x;return this.x=this.x*t.x-this.y*t.y,this.y=i,this}},divide:{value:function(t){var i=t.x*t.x+t.y*t.y,n=(this.y*t.x-this.x*t.y)/i;return this.x=(this.x*t.x+this.y*t.y)/i,this.y=n,this}},dot:{value:function(t){return this.x*t.x+this.y*t.y}},cross:{value:function(t){return this.x*t.y-this.y*t.x}}}),t(ni,G,{duration:{get:function(){return this.K},set:function(t){this.K=xt<t?t:xt}},interval:{get:function(){return this.Z},set:function(t){this.Z=0<t?t:0}},onstart:Gt,onresume:Gt,onupdate:Gt,onpause:Gt,onstop:Gt,onfinish:Gt,start:{value:function(){return this.j().onstart(),this.resume()}},resume:{value:function(){return this.V()&&this.$().onresume(),this}},pause:{value:function(){return this.isRunning()&&this.tt().onpause(),this}},stop:{value:function(t){return this.isRunning()&&this.it(t).onstop(),this}},isRunning:Ht,isStopped:Ht,isPaused:Ht,nt:{value:0,writable:!0},j:{value:function(){return this.st=0,this.ht=this.Z,this}},V:Ht,$:Gt,tt:Gt,it:Gt,et:Gt,O:Gt,ut:{value:function(t){return t<this.K?this.Z?t>this.ht&&this.rt(t):this.ot(t):(this.nt=t-this.K,this.tt().ot(this.K).onfinish(!0)),this}},rt:{value:function(t){var i=this.ht,n=this.Z,t=t-i;return this.ct(i).ht+=((t/n>>0)+K(t))*n,this}},ot:{value:function(t){return this.ct(this.ht=t)}},ct:Gt}),t(si,ni,Xt,{isRunning:{value:function(){return r(this.G)}},isStopped:{value:function(){return!this.isRunning()&&0===this.ft}},isPaused:{value:function(){return!this.isRunning()&&0!==this.ft}},add:{value:function(){for(var t=0;t<arguments.length;t++)this.m(arguments[t]);return this}},remove:{value:function(){for(var t=0;t<arguments.length;t++)this.k(arguments[t]);return this}},j:{value:function(){return this.at=this.ft=this.lt=this.vt=0,ni.prototype.j.call(this)}},V:{value:function(){return!this.isRunning()}},tt:{value:function(){return this.it().ft=this.vt,this}},et:{value:function(t){return this.vt=t,0===this.at?this.at=t:(0!==this.ft&&(this.lt+=t-this.ft,this.ft=0),this.ut(t-this.lt-this.at))}},ct:{value:function(t){var i=this.l,n=t-this.st;for(this.st=t;r(i);)i=i.et(n).g;return this.onupdate(t/this.K,t,n),this}},m:{value:function(t){t.dt&&(t.animation=this)}},k:{value:function(t){t.animation===this&&(t.animation=Rt)}}}),t(hi,si,{O:{value:function(){this.et(performance.now())}},$:{value:function(){return this.O(),this.G=L(this.H,this.Z),this}},it:{value:function(){return this.G=Q(this.G),this}}}),t(ei,si,{O:{value:function(t){this.G=W(this.H),this.et(t)}},$:{value:function(){return this.G=W(this.H),this}},it:{value:function(){return this.G=q(this.G),this}}});var ui={dt:{value:!0}};function ri(t,i){ni.call(this,t,i)}t(ri,ni,ui,{animation:{get:function(){return this.gt},set:function(t){var i=this.gt;i!==t&&(i!=It&&i.p(this),g(i=this.gt=t)&&i.o(this))}},onreverse:Gt,reverse:{value:function(){if(this.isStopped())return this;this.st=m(this.st,0,this.K);var t=this.isForward(),i=this.Z;return this.O=t?this._t:this.bt,i&&(this.ht+=t?i:-i),this.onreverse(),this.resume()}},isRunning:{value:function(){return this.O!==u&&this.et!==u}},isStopped:{value:function(){return this.O===u}},isPaused:{value:function(){return this.O!==u&&this.et===u}},isForward:{value:function(){return this.O===this.bt}},j:{value:function(){return this.O=this.bt,ni.prototype.j.call(this)}},V:{value:function(){return!this.isStopped()}},$:{value:function(){var t=this.isForward(),i=this.st+=t?this.nt:-this.nt,n=this.gt,i=t?this.K-i:i;return n.st+i>n.K&&(n.K=n.st+i,n.resume()),this.et=this.O,this.nt=0,this}},tt:{value:function(){return this.et=u,this}},it:{value:function(t){return this.et=(this.st=t?this.K:0)?this.bt:this._t,this.O=u,this}},bt:{value:function(t){return this.ut(this.st+=t)}},_t:{value:function(t){return this.Pt(this.st-=t)}},Pt:{value:function(t){return 0<t?this.Z?t<this.ht&&this.rt(t):this.ot(t):(this.nt=-t,this.tt().ot(0).onfinish(!1)),this}},ct:{value:function(t){return this.onupdate(t/this.K,t),this}}});function oi(t){t.N=t.kt=t.wt=t.yt=1,t.J=t.St=t.xt=t.It=0,ci(t)}var ci=function(t){t.Rt=t.Tt=t.Ct=t.At=0};function fi(t,i){ii.call(this),this.originX=Ct(t,0),this.originY=Ct(i,0),this.skewX=this.skewY=this.rotation=0,this.scaleX=this.scaleY=1}t(fi,ii,{originX:{get:function(){return this.Xt},set:function(t){this.Xt=t}},originY:{get:function(){return this.Yt},set:function(t){this.Yt=t}},parent:{get:function(){return this.Bt},set:function(t){for(var i=t;i!=It&&i!==this;)i=i.Bt;i!==this&&(this.Bt=t)}},skewX:{get:function(){return this.Dt},set:function(t){this.Dt!==t&&(this.Dt=t,this.Ft=et(t))}},skewY:{get:function(){return this.Lt},set:function(t){this.Lt!==t&&(this.Lt=t,this.Qt=et(t))}},scaleX:{get:function(){return this.Wt},set:function(t){this.Wt=k(t)}},scaleY:{get:function(){return this.qt},set:function(t){this.qt=k(t)}},rotation:{get:function(){return this.zt},set:function(t){this.zt!==t&&(this.zt=t,this.Gt=ht(t),this.Ht=st(t))}},alpha:{get:function(){return this.Y},set:function(t){this.Ot=t}},compositeOperation:{get:function(){return this.jt},set:function(t){this.Et=t}},filter:{get:function(){return this.Nt},set:function(t){this.Jt=t}},shadowBlur:{get:function(){return this.Mt},set:function(t){this.Ut=t}},shadowColor:{get:function(){return this.Kt},set:function(t){this.Zt=t}},shadowOffsetX:{get:function(){return this.Vt},set:function(t){this.$t=t}},shadowOffsetY:{get:function(){return this.ti},set:function(t){this.ii=t}},fillStyle:{get:function(){return this.ni},set:function(t){this.si=t}},strokeStyle:{get:function(){return this.hi},set:function(t){this.ei=t}},lineDash:{get:function(){return this.ui},set:function(t){this.ri=t}},lineDashOffset:{get:function(){return this.oi},set:function(t){this.ci=t}},lineWidth:{get:function(){return this.fi},set:function(t){this.ai=t}},lineCap:{get:function(){return this.li},set:function(t){this.vi=t}},lineJoin:{get:function(){return this.di},set:function(t){this.gi=t}},miterLimit:{get:function(){return this._i},set:function(t){this.pi=t}},smoothingEnabled:{get:function(){return this.bi},set:function(t){this.mi=t}},smoothingQuality:{get:function(){return this.Pi},set:function(t){this.ki=t}},font:{get:function(){return this.t},set:function(t){this.wi=t}},align:{get:function(){return this.yi},set:function(t){this.Si=t}},baseline:{get:function(){return this.xi},set:function(t){this.Ii=t}},direction:{get:function(){return this.u},set:function(t){this.Ri=t}},drag:{value:function(t,i){var n,s=this.Bt;return s!=It&&(n=s.St*t+s.yt*i,t=s.kt*t+s.It*i,i=n),this.x+=t,this.y+=i,this}},zoom:{value:function(t,i,n){var s,h=this.Bt;return h!=It&&(s=h.St*i+h.yt*n+h.At,i=h.kt*i+h.It*n+h.Tt,n=s),this.x=S(i,this.x,t),this.y=S(n,this.y,t),this.scaleX*=t,this.scaleY*=t,this}},updateTransform:{value:function(){return this.Ti(),this}},updateStyle:{value:function(){var t,i,n,s,h,e,u,r=this;do{var o=r.Ot,c=r.Et,f=r.Jt,a=r.Ut,l=r.Zt,v=r.$t,d=r.ii;o!=It&&_(t)&&(t=o),c!=It&&_(i)&&(i=c),f!=It&&_(n)&&(n=f),a!=It&&_(s)&&(s=a),l!=It&&_(h)&&(h=l),v!=It&&_(e)&&(e=v),d!=It&&_(u)&&(u=d)}while(g(r=r.Bt));return this.Y=_(t)?1:t,this.jt=_(i)?pt:i,this.Nt=_(n)?bt:n,this.Mt=_(s)?0:s,this.Kt=_(h)?mt:h,this.Vt=_(e)?0:e,this.ti=_(u)?0:u,this}},updateFillStyle:{value:function(){var t,i=this;do{var n=i.si;n!=It&&_(t)&&(t=n)}while(g(i=i.Bt));return this.ni=_(t)?Pt:t,this}},updateStrokeStyle:{value:function(){var t,i,n,s,h,e,u,r=this;do{var o=r.ei,c=r.ri,f=r.ci,a=r.ai,l=r.vi,v=r.gi,d=r.pi;o!=It&&_(t)&&(t=o),c!=It&&_(i)&&(i=c),f!=It&&_(n)&&(n=f),a!=It&&_(s)&&(s=a),l!=It&&_(h)&&(h=l),v!=It&&_(e)&&(e=v),d!=It&&_(u)&&(u=d)}while(g(r=r.Bt));return this.hi=_(t)?kt:t,this.ui=_(i)?wt:i,this.oi=_(n)?0:n,this.fi=_(s)?1:s,this.li=_(h)?"butt":h,this.di=_(e)?"miter":e,this._i=_(u)?10:u,this}},updateImageStyle:{value:function(){var t,i,n=this;do{var s=n.mi,h=n.ki;s!=It&&_(t)&&(t=s),h!=It&&_(i)&&(i=h)}while(g(n=n.Bt));return this.bi=!!_(t)||t,this.Pi=_(i)?"low":i,this}},updateTextStyle:{value:function(){var t,i,n,s,h=this;do{var e=h.wi,u=h.Si,r=h.Ii,o=h.Ri;e!=It&&_(t)&&(t=e),u!=It&&_(i)&&(i=u),r!=It&&_(n)&&(n=r),o!=It&&_(s)&&(s=o)}while(g(h=h.Bt));return this.t=_(t)?yt:t,this.yi=_(i)?"start":i,this.xi=_(n)?St:n,this.u=_(s)?"ltr":s,this}},a:{get:function(){return this.N}},b:{get:function(){return this.J}},c:{get:function(){return this.xt}},d:{get:function(){return this.wt}},e:{get:function(){return this.Rt}},f:{get:function(){return this.Ct}},Ti:{value:function(){var t,i=this.Bt,n=this.Ft,s=this.Qt,h=this.Wt,e=this.qt,u=this.Gt,r=this.Ht,o=this.Xt,c=this.Yt,f=u*h-s*r*e,a=r*h+s*u*e,s=-r*e+n*u*h,u=u*e+n*r*h,e=this.M+o*(1-f)-c*s,n=this.U+c*(1-u)-o*a;return i!=It&&(i.updateTransform(),r=i.N,h=i.J,t=f*r+a*(c=i.xt),a=f*h+a*(o=i.wt),f=t,t=s*r+u*c,u=s*h+u*o,s=t,t=e*r+n*c+i.Rt,n=e*h+n*o+i.Ct,e=t),(this.Rt!==e||this.Ct!==n||this.N!==f||this.wt!==u||this.J!==a||this.xt!==s)&&(t=f*u-a*s,this.N=f,this.J=a,this.xt=s,this.wt=u,this.Rt=e,this.Ct=n,this.kt=u/t,this.St=-a/t,this.It=-s/t,this.yt=f/t,this.Tt=(s*n-u*e)/t,this.At=(a*e-f*n)/t,!0)}}});var ai={Ci:{value:!0}},li=O({context:{get:function(){return this.Ai},set:function(t){this.Ai=t}}},ai);function vi(t,i,n,s){fi.call(this,n,s),this.startX=Ct(t,0),this.startY=Ct(i,0)}t(vi,fi,li,{startX:{get:function(){return this.Xi},set:function(t){this.Xi=t}},startY:{get:function(){return this.Yi},set:function(t){this.Yi=t}},fill:{value:function(t){return this.Fi().Di().Bi(t)}},stroke:{value:function(){return this.Qi().Di().Li()}},fillStroke:{value:function(t){return this.Wi().Di().Bi(t).Li()}},strokeFill:{value:function(t){return this.Wi().Di().Li().Bi(t)}},clip:{value:function(t){return this.Di().zi().qi(t)}},restore:{value:function(t){for(var i,n=this.Ai,s=n.Gi;s.length&&(i=s.pop(),n.N=i.N,n.J=i.J,n.xt=i.xt,n.wt=i.wt,n.Rt=i.Rt,n.Ct=i.Ct,n.kt=i.kt,n.St=i.St,n.It=i.It,n.yt=i.yt,n.Tt=i.Tt,n.At=i.At,n.Hi=i.Hi,n.Oi=i.Oi,n.Nt=i.Nt,n.Mt=i.Mt,n.Kt=i.Kt,n.Vt=i.Vt,n.ti=i.ti,n.ni=i.ni,n.hi=i.hi,n.ui=i.ui,n.oi=i.oi,n.fi=i.fi,n.li=i.li,n.di=i.di,n._i=i._i,n.t=i.t,n.i=i.i,n.h=i.h,n.u=i.u,n.ji=i.ji,n.Ei=i.Ei,n.restore(),0<--t););return this}},clearRect:{value:function(t,i,n,s,h){return this.clip(h).Ai.clearRect(this.Xi+t,this.Yi+i,n,s),this.restore()}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY)}},buildPath:{value:function(t,i,n){t.beginPath()},writable:!0},isPointInPath:{value:function(t,i){return this.Ni(!0,t,i)}},isPointInStroke:{value:function(t,i){return this.Ni(!1,t,i)}},isQuickInPath:{value:function(t,i){return this.Ji(!0,t,i)}},isQuickInStroke:{value:function(t,i){return this.Ji(!1,t,i)}},createLinearGradient:{value:function(t,i,n,s){return h(t+this.Xi,i+this.Yi,n+this.Xi,s+this.Yi)}},createRadialGradient:{value:function(t,i,n,s,h,e){return l(t+this.Xi,i+this.Yi,n,s+this.Xi,h+this.Yi,e)}},createConicGradient:{value:function(t,i,n){return e(t,i+this.Xi,n+this.Yi)}},Bi:{value:function(t){return this.Ai.fill(t),this}},Li:{value:function(){return this.Ai.stroke(),this}},Fi:{value:function(){return this.Ui().Mi()}},Qi:{value:function(){return this.Ui().Ki()}},Wi:{value:function(){return this.Ui().Mi().Ki()}},Ui:{value:function(){var t=this.updateStyle().Ai,i=t.Zi,n=this.Y,s=this.jt,h=this.Nt,e=this.Mt,u=this.Kt,r=this.Vt,o=this.ti;return t.Hi!==n&&(t.globalAlpha=t.Hi=n),t.Oi!==s&&(t.globalCompositeOperation=t.Oi=s),t.Nt!==h&&(t.filter=t.Nt=h),t.Mt!==e&&(t.shadowBlur=(t.Mt=e)*i),t.Kt!==u&&(t.shadowColor=t.Kt=u),t.Vt!==r&&(t.shadowOffsetX=(t.Vt=r)*i),t.ti!==o&&(t.shadowOffsetY=(t.ti=o)*i),this}},Mi:{value:function(){var t=this.updateFillStyle().Ai,i=this.ni;return t.ni!==i&&(t.fillStyle=t.ni=i),this}},Ki:{value:function(){var t=this.updateStrokeStyle().Ai,i=this.hi,n=this.ui,s=this.oi,h=this.fi,e=this.li,u=this.di,r=this._i;return t.hi!==i&&(t.strokeStyle=t.hi=i),t.ui!==n&&t.setLineDash(t.ui=n),t.oi!==s&&(t.lineDashOffset=t.oi=s),t.fi!==h&&(t.lineWidth=t.fi=h),t.li!==e&&(t.lineCap=t.li=e),t.di!==u&&(t.lineJoin=t.di=u),t._i!==r&&(t.miterLimit=t._i=r),this}},qi:{value:function(t){return this.Ai.clip(t),this}},zi:{value:function(t){var i=this.Ai;return i.Gi.push({N:i.N,J:i.J,xt:i.xt,wt:i.wt,Rt:i.Rt,Ct:i.Ct,kt:i.kt,St:i.St,It:i.It,yt:i.yt,Tt:i.Tt,At:i.At,Hi:i.Hi,Oi:i.Oi,Nt:i.Nt,Mt:i.Mt,Kt:i.Kt,Vt:i.Vt,ti:i.ti,ni:i.ni,hi:i.hi,ui:i.ui,oi:i.oi,fi:i.fi,li:i.li,di:i.di,_i:i._i,t:i.t,i:i.i,h:i.h,u:i.u,ji:i.ji,Ei:i.Ei}),i.save(),this}},Vi:{value:function(){var t,i,n,s,h,e,u=this.updateTransform().Ai,r=this.N,o=this.J,c=this.xt,f=this.wt,a=this.Rt,l=this.Ct;return u.N!==r||u.wt!==f||u.J!==o||u.xt!==c?(t=u.kt,i=u.St,n=u.It,s=u.yt,h=u.Tt,e=u.At,u.transform(r*t+o*n,r*i+o*s,c*t+f*n,c*i+f*s,a*t+l*n+h,a*i+l*s+e),u.N=r,u.J=o,u.xt=c,u.wt=f,u.Rt=a,u.Ct=l,u.kt=this.kt,u.St=this.St,u.It=this.It,u.yt=this.yt,u.Tt=this.Tt,u.At=this.At):u.Rt===a&&u.Ct===l||(u.translate(a*u.kt+l*u.It+u.Tt,a*u.St+l*u.yt+u.At),u.Rt=a,u.Ct=l,u.Tt=this.Tt,u.At=this.At),this}},$i:{value:function(){var t=this.Ai,i=t.kt,n=t.St,s=t.It,h=t.yt,e=t.Tt,u=t.At;return 1!==i||1!==h||0!==n||0!==s?(t.transform(i,n,s,h,e,u),oi(t)):0===e&&0===u||(t.translate(e,u),ci(t)),this}},Di:{value:function(){return this.Vi().rebuildPath(),this}},Ni:{value:function(t,i,n){var s=this.Ai,h=this.kt,e=this.St,u=this.It,r=this.yt,o=this.Tt,c=this.At,f=s.N,a=s.J,l=s.xt,v=s.wt,d=s.Zi,v=((h*a+e*v)*i+(u*a+r*v)*n+o*a+c*v+s.Ct)*d;return i=((h*f+e*l)*i+(u*f+r*l)*n+o*f+c*l+s.Rt)*d,n=v,t?this.tn(i,n):this.nn(i,n)}},tn:{value:function(t,i){return this.rebuildPath(),this.Ai.isPointInPath(t,i)}},nn:{value:function(t,i){return this.rebuildPath(),this.Ai.isPointInStroke(t,i)}},Ji:{value:function(t,i,n){var s=this.St*i+this.yt*n+this.At;return i=this.kt*i+this.It*n+this.Tt,n=s,t?this.sn(i,n):this.hn(i,n)}},sn:{value:function(t,i){var n=this.Ai.Zi;return this.$i().tn(t*n,i*n)}},hn:{value:function(t,i){var n=this.Ai.Zi;return this.$i().nn(t*n,i*n)}}});var di=function(t,i){return t>=this.left&&i>=this.top&&t<=this.right&&i<=this.bottom},gi={left:{get:function(){return this.Xi+this.en+this.un}},top:{get:function(){return this.Yi+this.rn+this.cn}},right:{get:function(){return this.Xi+this.en+this.fn}},bottom:{get:function(){return this.Yi+this.rn+this.an}},sn:{value:di},hn:{value:function(t,i){var n=this.left,s=this.top,h=this.right,e=this.bottom,u=this.fi;return(0===$((t-n)/u)||0===$((t-h)/u))&&s<=i&&i<=e||(0===$((i-s)/u)||0===$((i-e)/u))&&n<=t&&t<=h}}},_i=O({un:{get:function(){return M(this.width,0)}},cn:{get:function(){return M(this.height,0)}},fn:{get:function(){return U(this.width,0)}},an:{get:function(){return U(this.height,0)}}},gi),pi={en:{get:function(){return 0}},rn:{get:function(){return 0}}};function bi(t,i,n,s,h,e){vi.call(this,t,i,h,e),this.width=n,this.height=s}function mi(t,i,n,s,h,e,u){bi.call(this,t,i,n,s,e,u),this.spacing=h}t(bi,vi,_i,pi,{width:{get:function(){return this.ln},set:function(t){this.ln=t}},height:{get:function(){return this.vn},set:function(t){this.vn=t}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.width,this.height)}},buildPath:{value:function(t,i,n,s,h){t.beginPath(),t.rect(i,n,s,h)}}}),t(mi,bi,{spacing:{get:function(){return this.dn},set:function(t){this.dn=w(t)}},rebuildPath:{value:function(){this.buildPath(this.context,this.left,this.top,this.right,this.bottom,this.spacing)}},buildPath:{value:function(t,i,n,s,h,e){var u;for(t.beginPath(),u=i+e;u<s;u+=e)t.moveTo(u,n),t.lineTo(u,h);for(u=n+e;u<h;u+=e)t.moveTo(i,u),t.lineTo(s,u)}}});J={radius:{get:function(){return this.gn},set:function(t){this.gn=t}}};function Pi(t,i,n,s,h,e,u){bi.call(this,t,i,n,s,e,u),this.radius=Ct(h,0)}function ki(t,i,n,s,h,e,u,r,o,c,f){bi.call(this,t,i,e,u,s,h),a(n)?this.src=n:this.image=n,this.cropX=r,this.cropY=o,this.cropWidth=c,this.cropHeight=f}function wi(t,i,n,s,h,e,u,r,o,c,f){bi.call(this,t,i,n,s,c,f),this.amplitude=Ct(h,10),this.method=Ct(e,st),this.period=Ct(u,ct),this.phase=Ct(r,0),this.step=o}t(Pi,bi,J,{rebuildPath:{value:function(){this.buildPath(this.context,this.left,this.top,this.right,this.bottom,this.radius)}},buildPath:{value:function(t,i,n,s,h,e){t.beginPath(),t.moveTo(i+e,n),t.arcTo(s,n,s,h,e),t.arcTo(s,h,i,h,e),t.arcTo(i,h,i,n,e),t.arcTo(i,n,s,n,e)}}}),t(ki,bi,{width:{get:function(){return this._n?this.pn:this.ln},set:function(t){this.ln=t}},height:{get:function(){return this.bn?this.mn:this.vn},set:function(t){this.vn=t}},cropX:{get:function(){return this.Pn},set:function(t){this.Pn=t}},cropY:{get:function(){return this.kn},set:function(t){this.kn=t}},cropWidth:{get:function(){return this.wn},set:function(t){this.wn=t}},cropHeight:{get:function(){return this.yn},set:function(t){this.yn=t}},src:{get:function(){return this.Sn},set:function(t){s(this.Sn=Y(t),this.xn,this)}},image:{get:function(){return this.In},set:function(t){Tt(t)?this.In=this.Sn=this.pn=this.mn=Rt:this.In!==t&&(this.In=t,this.Sn=t.src,this.pn=t.width,this.mn=t.height)}},complete:{get:function(){return this.In&&this.In.src===this.Sn}},onload:Gt,toImageData:{value:function(){var t=this.width,i=this.height;return Lt.width=t,Lt.height=i,this.Rn(Qt,1,0,0),Qt.getImageData(0,0,t,i)}},createPattern:{value:function(t){t=v(this.In,t);return t.setTransform({a:this.N,b:this.J,c:this.xt,d:this.wt,e:this.Rt+this.Xi*this.N+this.Yi*this.xt,f:this.Ct+this.Xi*this.J+this.Yi*this.wt}),t}},draw:{value:function(){return this.Tn().Vi().Rn(this.Ai,this.Ai.Zi,this.Xi,this.Yi)}},xn:{value:function(t,i){-1!==t.src.indexOf(this.Sn)&&(this.image=t,this.onload(i))}},_n:{get:function(){return Tt(this.ln)}},bn:{get:function(){return Tt(this.vn)}},Cn:{get:function(){return Tt(this.Pn)||Tt(this.kn)||Tt(this.wn)||Tt(this.yn)}},Rn:{value:function(t,i,n,s){var h=this.In;return h!=It&&(this.Cn?this._n&&this.bn?t.drawImage(h,n,s):t.drawImage(h,n,s,this.width,this.height):t.drawImage(h,this.Pn*i,this.kn*i,this.wn*i,this.yn*i,n,s,this.width,this.height)),this}},Tn:{value:function(){return this.Ui().An()}},An:{value:function(){var t=this.updateImageStyle().Ai,i=this.bi,n=this.Pi;return t.ji!==i&&(t.imageSmoothingEnabled=t.ji=i),t.Ei!==n&&(t.imageSmoothingQuality=t.Ei=n),this}}}),t(wi,bi,{amplitude:{get:function(){return this.Xn},set:function(t){this.Xn=t}},method:{get:function(){return this.Yn},set:function(t){this.Yn=t}},period:{get:function(){return this.Bn},set:function(t){this.Bn=t}},phase:{get:function(){return this.Dn},set:function(t){this.Dn=t}},step:{get:function(){return this.Fn},set:function(t){this.Fn=w(t)}},rebuildPath:{value:function(){this.buildPath(this.context,this.left,this.top,this.right,this.bottom,this.amplitude,this.method,this.period,this.phase,this.step)}},buildPath:{value:function(t,i,n,s,h,e,u,r,o,c){t.beginPath();for(var f=i;f<s;f+=c)t.lineTo(f,n+e*u((f-i)/(s-i)*r+o));t.lineTo(s,n+e*u(r+o)),t.lineTo(s,h),t.lineTo(i,h),t.closePath()}}});Xt={data:{get:function(){return this.Ln}}};function yi(t,i,n,s,h,e,u,r){ii.call(this),this.getImageData(t,i,n,s),this.dirtyX=h,this.dirtyY=e,this.dirtyWidth=u,this.dirtyHeight=r}t(yi,ii,li,Xt,{dirtyX:{get:function(){return this.Qn},set:function(t){this.Qn=t}},dirtyY:{get:function(){return this.Wn},set:function(t){this.Wn=t}},dirtyWidth:{get:function(){return this.qn},set:function(t){this.qn=t}},dirtyHeight:{get:function(){return this.zn},set:function(t){this.zn=t}},imageData:{get:function(){return this.Gn},set:function(t){Tt(t)?this.Gn=this.Ln=this.ln=this.vn=Rt:this.Gn!==t&&(this.Gn=t,this.Ln=t.data,this.ln=t.width,this.vn=t.height)}},width:{get:function(){return this.ln}},height:{get:function(){return this.vn}},left:{get:function(){return this.M}},top:{get:function(){return this.U}},right:{get:function(){return this.M+this.ln}},bottom:{get:function(){return this.U+this.vn}},getImageData:{value:function(t,i,n,s){return n!=It&&(r(n.data)?this.imageData=Tt(s)?n.Gn||n:new X(n.data,s):Tt(t)||Tt(i)||Tt(this.Ai)?this.imageData=Qt.createImageData(n,s):this.imageData=this.Ai.getImageData(t,i,n,s),this.x=t,this.y=i),this}},toDataURL:{value:function(t,i){return this.Hn(),Lt.toDataURL(t,i)}},toBlob:{value:function(t,i,n){return this.Hn(),Lt.toBlob(t,i,n),this}},put:{value:function(){return this.On(this.Ai,this.M,this.U)}},isPointInPath:{value:di},getPixelIndex:{value:function(t,i){return 4*(t-this.M+(i-this.U)*this.ln)}},forEach:{value:function(t,i,n,s,h,e){h=b(h,this.right-(n=p(n,this.left))),e=b(e,this.bottom-(s=p(s,this.top)));for(var u,r=this.Ln,o=this.getPixelIndex(n,s),c=4*(this.ln-h),f=n+h,a=s+e,l=s;l<a;l++){for(u=n;u<f;u++)t.call(i,r,o,u,l),o+=4;o+=c}return this}},mosaic:{value:function(t,i,n,s,h){if(1===(t=w(t)))return this;s=b(s,this.right-(i=p(i,this.left))),h=b(h,this.bottom-(n=p(n,this.top)));for(var e,f=this.Ln,u=this.getPixelIndex(i,n),a=this.ln,r=Z(h/t),o=Z(s/t),c=s%t,l=h%t,v=0;v<r;v++){for(e=0;e<o;e++)d(u,t,t),u+=4*t;d(u,c,t),u+=4*(c+(t-1)*a)}for(e=0;e<o;e++)d(u,t,l),u+=4*t;function d(t,i,n){for(var s,h=t+4*(y(i)+y(n)*a),e=f[h],u=f[h+1],r=f[h+2],o=f[h+3],c=0;c<n;c++){for(s=0;s<i;s++)f[t]=e,f[t+1]=u,f[t+2]=r,f[t+3]=o,t+=4;t+=4*(a-i)}}return(1<c||1<l)&&d(u,c,l),this}},transparencyDisposal:{value:function(n,t,i,s,h){return n=255*Ct(n,1),this.forEach(function(t,i){t[i]>=n&&t[i+1]>=n&&t[i+2]>=n&&(t[i+3]=0)},this,t,i,s,h)}},reverseColor:{value:function(t,i,n,s){return this.forEach(function(t,i){t[i]=255-t[i],t[i+1]=255-t[i+1],t[i+2]=255-t[i+2]},this,t,i,n,s)}},greyProcessing:{value:function(t,i,n,s){return this.forEach(function(t,i){t[i]=t[i+1]=t[i+2]=.299*t[i]+.587*t[i+1]+.114*t[i+2]},this,t,i,n,s)}},blackWhite:{value:function(n,t,i,s,h){return n=Tt(n)?127:254*n,this.forEach(function(t,i){t[i]=t[i+1]=t[i+2]=(t[i]+t[i+1]+t[i+2])/3>n?255:0},this,t,i,s,h)}},relief:{value:function(){for(var t,i=this.Ln,n=this.ln,s=n-1,h=this.vn-1,e=4*n,u=0,r=0;r<h;r++){for(t=0;t<s;t++)i[u]=2*i[u]-i[u+4]-i[u+e]+127.5,i[u+1]=2*i[u+1]-i[u+5]-i[u+1+e]+127.5,i[u+2]=2*i[u+2]-i[u+6]-i[u+2+e]+127.5,u+=4;u+=4}for(u=4*s,r=0;r<h;r++)i[u]=i[u-4],i[u+1]=i[u-3],i[u+2]=i[u-2],u+=e;for(u=h*e,t=0;t<n;t++)i[u]=i[u-e],i[u+1]=i[u+1-e],i[u+2]=i[u+2-e],u+=4;return this}},sunGlass:{value:function(){for(var t,i=this.Ln,n=this.ln,s=n-1,h=this.vn-1,e=4*n,u=0,r=0;r<h;r++){for(t=0;t<s;t++)i[u]=2*i[u]-1.5*i[u+4],i[u+1]=2*i[u+1]-1.5*i[u+5],i[u+2]=2*i[u+2]-1.5*i[u+6],u+=4;u+=4}for(u=4*s,r=0;r<h;r++)i[u]=i[u-4],i[u+1]=i[u-3],i[u+2]=i[u-2],u+=e;for(u=h*e,t=0;t<n;t++)i[u]=i[u-e],i[u+1]=i[u+1-e],i[u+2]=i[u+2-e],u+=4;return this}},frostedGlass:{value:function(u){return 1===(u=w(u))?this:this.forEach(function(t,i,n,s){var h=y(u),e=y(u);n+h>=this.right||s+e>=this.bottom||(e=i+4*(h+e*this.ln),t[i]=t[e],t[i+1]=t[e+1],t[i+2]=t[e+2],t[i+3]=t[e+3])},this)}},jn:{get:function(){return Tt(this.Qn)||Tt(this.Wn)||Tt(this.qn)||Tt(this.zn)}},On:{value:function(t,i,n){var s=this.Gn;return s!=It&&(this.jn?t.putImageData(s,i,n):t.putImageData(s,i,n,this.Qn,this.Wn,this.qn,this.zn)),this}},Hn:{value:function(){this.jn?(Lt.width=this.ln,Lt.height=this.vn):(Lt.width=this.qn,Lt.height=this.zn),this.On(Qt,0,0)}}});var Si=function(t,i,n,s,h){t.t!==i&&(t.font=t.t=i),t.i!==n&&(t.textAlign=t.i=n),t.h!==s&&(t.textBaseline=t.h=s),t.u!==h&&(t.direction=t.u=h)},li={Di:{value:vi.prototype.Vi}};function xi(t,i,n,s,h,e){vi.call(this,t,i,h,e),this.text=Ct(n,""),this.maxWidth=s}t(xi,vi,gi,pi,li,{text:{get:function(){return this.En},set:function(t){this.En=t}},maxWidth:{get:function(){return this.Nn},set:function(t){this.Nn=t}},metrics:{get:function(){return n(this.En,this.t,this.yi,this.xi,this.u)}},width:{get:function(){return this.metrics.width*this.Jn}},actualBoundingBoxWidth:{get:function(){return this.metrics.actualBoundingBoxWidth*this.Jn}},actualBoundingBoxHeight:{get:function(){return this.metrics.actualBoundingBoxHeight}},un:{get:function(){return-this.metrics.actualBoundingBoxLeft*this.Jn}},cn:{get:function(){return-this.metrics.actualBoundingBoxAscent}},fn:{get:function(){return this.metrics.actualBoundingBoxRight*this.Jn}},an:{get:function(){return this.metrics.actualBoundingBoxDescent}},Jn:{get:function(){var t,i=this.Nn;return i!=It&&i<(t=this.metrics.width)?i/t:1}},Ni:{value:xi.prototype.Ji},Bi:{value:function(){return this.Ai.fillText(this.En,this.Xi,this.Yi,this.Nn),this}},Li:{value:function(){return this.Ai.strokeText(this.En,this.Xi,this.Yi,this.Nn),this}},qi:{value:function(){var t=this.Ai;return t.beginPath(),t.rect(this.left,this.top,this.actualBoundingBoxWidth,this.actualBoundingBoxHeight),t.clip(),this}},Fi:{value:function(){return vi.prototype.Fi.call(this).Mn()}},Qi:{value:function(){return vi.prototype.Qi.call(this).Mn()}},Wi:{value:function(){return vi.prototype.Wi.call(this).Mn()}},Mn:{value:function(){return Si(this.updateTextStyle().Ai,this.t,this.yi,this.xi,this.u),this}}});di={centerX:{get:function(){return this.Xi+this.en}},centerY:{get:function(){return this.Yi+this.rn}},sn:{value:function(t,i){var n=this.centerX,s=this.centerY,h=this.radius;return(n-t)*(n-t)+(s-i)*(s-i)<=h*h}},hn:{value:function(t,i){var n=this.centerX,s=this.centerY;return 0===$((nt((n-t)*(n-t)+(s-i)*(s-i))-this.radius)/this.fi)}}};function Ii(t,i,n,s,h,e,u,r){vi.call(this,t,i,u,r),this.radius=Ct(n,0),this.startAngle=Ct(s,0),this.endAngle=Ct(h,ct),this.anticlockwise=Ct(e,!1)}function Ri(t,i,n,s,h,e,u,r){Ii.call(this,t,i,n,s,h,e,u,r)}t(Ii,vi,di,pi,J,{startAngle:{get:function(){return this.Un},set:function(t){this.Un=t}},endAngle:{get:function(){return this.Kn},set:function(t){this.Kn=t}},anticlockwise:{get:function(){return this.Zn},set:function(t){this.Zn=t}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}},buildPath:{value:function(t,i,n,s,h,e,u){t.beginPath(),t.arc(i,n,s,h,e,u)}}}),t(Ri,Ii,{buildPath:{value:function(t,i,n,s,h,e,u){Ii.prototype.buildPath.call(this,t,i,n,s,h,e,u),t.lineTo(i,n),t.closePath()}}});gi={innerRadius:{get:function(){return this.Vn},set:function(t){this.Vn=t}}};function Ti(t,i,n,s,h,e,u,r,o){Ii.call(this,t,i,n,h,e,u,r,o),this.innerRadius=Ct(s,0)}function Ci(t,i,n,s,h,e,u,r,o){Ii.call(this,t,i,n,h,e,u,r,o),this.radiusY=Ct(s,0)}function Ai(t,i,n,s,h,e){vi.call(this,t,i,h,e),this.sides=Ct(s,3)}function Xi(t,i,n,s,h,e){Ai.call(this,t,i,n,s,h,e)}t(Ti,Ii,gi,{outerRadius:{get:function(){return this.gn},set:function(t){this.gn=t}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.outerRadius,this.innerRadius,this.startAngle,this.endAngle,this.anticlockwise)}},buildPath:{value:function(t,i,n,s,h,e,u,r){Ii.prototype.buildPath.call(this,t,i,n,s,e,u,r),t.arc(i,n,h,u,e,!r),t.closePath()}}}),t(Ci,Ii,{radiusX:{get:function(){return this.gn},set:function(t){this.gn=t}},radiusY:{get:function(){return this.$n},set:function(t){this.$n=t}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.radiusX,this.radiusY,this.startAngle,this.endAngle,this.anticlockwise)}},buildPath:{value:function(t,i,n,s,h,e,u,r){t.beginPath(),t.ellipse(i,n,s,h,0,e,u,r)}},sn:{value:function(t,i){var n=this.Xi,s=this.Yi,h=this.gn,e=this.$n;return(t-n)*(t-n)*e/h+(i-s)*(i-s)*h/e<=h*e}},hn:{value:function(t,i){var n=this.Xi,s=this.Yi,h=this.gn,e=this.$n;return 0===$((nt((t-n)*(t-n)*e/h+(i-s)*(i-s)*h/e)-nt(h*e))/this.fi)}}}),t(Ai,vi,di,pi,J,{sides:{get:function(){return this.ts},set:function(t){this.ts!==t&&(this.ts=t,this.ns=ht(ct/t),this.ss=st(ct/t))}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.radius,this.sides,this.ns,this.ss)}},buildPath:{value:function(t,i,n,s,h,e,u){var r,o=s,c=0;t.beginPath(),t.moveTo(i+o,n+c);for(var f=0;f<h-1;f++)r=o*u+c*e,o=o*e-c*u,c=r,t.lineTo(i+o,n+c);t.closePath()}}}),t(Xi,Ai,gi,{sides:{get:function(){return this.ts},set:function(t){this.ts!==t&&(this.ts=t,this.ns=ht(ct/t),this.ss=st(ct/t),this.hs=ht(ot/t),this.es=st(ot/t))}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.radius,this.sides,this.ns,this.ss,this.hs,this.es,Tt(this.Vn)?this.gn/(4<this.ts?this.hs/this.ns:3):this.Vn)}},buildPath:{value:function(t,i,n,s,h,e,u,r,o,c){var f,a=s*e,l=s*u,v=c*r,d=c*o;t.beginPath();for(var g=0;g<2*h;g++)1&g?(t.lineTo(i+a,n+l),f=a*u+l*e,a=a*e-l*u,l=f):(t.lineTo(i+v,n+d),f=v*u+d*e,v=v*e-d*u,d=f);t.closePath()}}});var Yi=function(t,i,n,s,h,e){var u=(s-i)/3,r=(h-n)/3,o=i+u,c=n+r,f=o+(u+r*gt)/2,a=c+(r-u*gt)/2,u=i+2*u,r=n+2*r;--e?(Yi(t,i,n,o,c,e),Yi(t,o,c,f,a,e),Yi(t,f,a,u,r,e),Yi(t,u,r,s,h,e)):(t.lineTo(o,c),t.lineTo(f,a),t.lineTo(u,r),t.lineTo(s,h))};function Bi(t,i,n,s,h,e){Ai.call(this,t,i,n,s,h,e)}function Di(t,i,n,s,h,e){vi.call(this,t,i,h,e),this.endX=Ct(n,0),this.endY=Ct(s,0)}function Fi(t,i,n,s,h,e,u,r){Di.call(this,t,i,n,s,u,r),this.controlX=h,this.controlY=e}function Li(t,i,n,s,h,e,u,r,o,c){Fi.call(this,t,i,n,s,h,e,o,c),this.controlX2=u,this.controlY2=r}t(Bi,Ai,{sides:{get:function(){return this.ts},set:function(t){this.ts=w(t)}},buildPath:{value:function(t,i,n,s,h){var e,u=gt/2,r=-.5*s,o=s*u,c=i+s;t.beginPath(),Yi(t,c,n,e=i+r,s=n+o,h),Yi(t,e,s,e=i+(-.5*r-o*u),s=n+(r*u+-.5*o),h),Yi(t,e,s,c,n,h),t.closePath()}}}),t(Di,vi,{endX:{get:function(){return this.us},set:function(t){this.us=t}},endY:{get:function(){return this.rs},set:function(t){this.rs=t}},length:{get:function(){var t=this.us-this.Xi,i=this.rs-this.Yi;return nt(t*t+i*i)}},angle:{get:function(){return ut(this.rs-this.Yi,this.us-this.Xi)}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.endX,this.endY)}},buildPath:{value:function(t,i,n,s,h){t.beginPath(),t.moveTo(i,n),t.lineTo(s,h)}}}),t(Fi,Di,{controlX:{get:function(){return this.os},set:function(t){this.os=t}},controlY:{get:function(){return this.cs},set:function(t){this.cs=t}},startAngle:{get:function(){return this.Un}},endAngle:{get:function(){return this.Kn}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.endX,this.endY,this.controlX,this.controlY,this.fs,this)}},buildPath:{value:function(t,i,n,s,h,e,u,r,o){var c,f,a,l,v,d,g,_,p,b=s-i,m=h-n,P=i-e,k=n-u;t.beginPath(),!r&&b*k-m*P>>0?(p=-(g=-(a=i*i+n*n)*(f=m+k)+(l=s*s+h*h)*k+(v=e*e+u*u)*m)/(d=i*f-n*(c=b+P)+s*u-e*h)/2,r=-(_=a*c-l*P-v*b)/d/2,P=c*k<f*P,t.arc(p,r,nt((g*g+_*_-4*d*(a*(e*h-s*u)+l*(i*u-e*n)+v*(s*n-i*h)))/(4*d*d)),d=ut(n-r,i-p),p=ut(h-r,s-p),P),P?(d-=at,p-=at):(d+=at,p+=at)):(t.moveTo(i,n),t.lineTo(s,h),d=p=ut(m,b)),o.Un=d,o.Kn=p}},fs:{get:function(){return Tt(this.os)||Tt(this.cs)}}}),t(Li,Fi,{controlX1:{get:function(){return this.os},set:function(t){this.os=t}},controlY1:{get:function(){return this.cs},set:function(t){this.cs=t}},controlX2:{get:function(){return this.ls},set:function(t){this.ls=t}},controlY2:{get:function(){return this.vs},set:function(t){this.vs=t}},startAngle:{get:function(){return this.ds?this.angle:ut(this.cs-this.Yi,this.os-this.Xi)}},endAngle:{get:function(){return this.ds?this.angle:this.gs?ut(this.rs-this.cs,this.us-this.os):ut(this.rs-this.vs,this.us-this.ls)}},centerAngle:{get:function(){return this.gs?this.angle:ut(this.vs-this.cs,this.ls-this.os)}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.endX,this.endY,this.controlX1,this.controlY1,this.controlX2,this.controlY2,this.ds,this.gs)}},buildPath:{value:function(t,i,n,s,h,e,u,r,o,c,f){t.beginPath(),t.moveTo(i,n),c?t.lineTo(s,h):f?t.quadraticCurveTo(e,u,s,h):t.bezierCurveTo(e,u,r,o,s,h)}},ds:{get:function(){return this.fs}},gs:{get:function(){return Tt(this.ls)||Tt(this.vs)}}});gi={length:{get:function(){return this.P},set:function(t){this.P=t}}};function Qi(t,i,n,s,h,e){vi.call(this,t,i,h,e),this.length=Ct(n,10),this.angle=Ct(s,lt)}function Wi(t,i,n,s,h,e){Qi.call(this,t,i,n,s,h,e)}function qi(t,i,n,s,h,e){Qi.call(this,t,i,n,s,h,e)}function zi(t,i,n,s,h,e){Qi.call(this,t,i,n,s,h,e)}function Gi(t,i,n,s,h){vi.call(this,t,i,s,h),this.path=n}function Hi(t,i,n,s,h,e){vi.call(this,t,i,h,e),this.points=Tt(n)?[]:n,this.length=Ct(s,0),this._s=[],this.Ln=[]}function Oi(t,i,n,s,h,e){Hi.call(this,t,i,n,s,h,e)}function ji(t,i,n,s,h,e){Oi.call(this,t,i,n,s,h,e)}t(Qi,vi,gi,{angle:{get:function(){return this.ps},set:function(t){return this.ps!==(t=d(t,ot))&&(this.ps=t,this.bs=et(t/2)),this}},rebuildPath:{value:function(){this.buildPath(this.context,this.startX,this.startY,this.length,this.angle,this.bs)}},buildPath:{value:function(t,i,n,s,h,e){var u=i-s,e=-s*e;t.beginPath(),t.moveTo(u,n+e),t.lineTo(i,n),t.lineTo(u,n-e),t.closePath()}}}),t(Wi,Qi,{buildPath:{value:function(t,i,n,s,h,e){var u=i-s,r=i-s*(1-4*e/3),e=-s*e;t.beginPath(),t.moveTo(i,n),t.bezierCurveTo(r,n+3*e/2,u,n+e,u,n),t.bezierCurveTo(u,n-e,r,n-3*e/2,i,n),t.closePath()}}}),t(qi,Qi,{buildPath:{value:function(t,i,n,s,h,e){var u=i-2*s/3,r=i-5*s/3,e=-s*e;t.beginPath(),t.moveTo(i,n),t.bezierCurveTo(u,n+2*e,r,n+e/2,i-s,n),t.bezierCurveTo(r,n-e/2,u,n-2*e,i,n),t.closePath()}}}),t(zi,Qi,{buildPath:{value:function(t,i,n,s,h,e){var u=i-s,s=s*e,e=s*e;t.beginPath(),t.moveTo(u,n-s),t.lineTo(i,n),t.lineTo(u,n+s),t.arc(u-e,n,nt(s*s+e*e),(ot-h)/2,(h-ot)/2,!1)}}}),t(Gi,vi,li,{path:{get:function(){var t=new Path2D;return t.addPath(this.Ps,{e:-this.Xi,f:-this.Yi}),t},set:function(t){return this.Ps=new Path2D,this.addPath(t)}},addPath:{value:function(t){switch(N.call(t)){case"[object String]":this.Ps.addPath(new Path2D(t),{e:this.Xi,f:this.Yi});break;case"[object Path2D]":this.Ps.addPath(t,{e:this.Xi,f:this.Yi});break;case"[object Object]":this.Ps.addPath(t.Ps,{a:t.N,b:t.J,c:t.xt,d:t.wt,e:t.Rt+this.Xi,f:t.Ct+this.Yi})}return this}},moveTo:{value:function(t,i){return this.Ps.moveTo(this.Xi+t,this.Yi+i),this}},lineTo:{value:function(t,i){return this.Ps.lineTo(this.Xi+t,this.Yi+i),this}},arcTo:{value:function(t,i,n,s,h){return this.Ps.arcTo(this.Xi+t,this.Yi+i,this.Xi+n,this.Yi+s,h),this}},quadraticCurveTo:{value:function(t,i,n,s){return this.Ps.quadraticCurveTo(this.Xi+t,this.Yi+i,this.Xi+n,this.Yi+s),this}},bezierCurveTo:{value:function(t,i,n,s,h,e){return this.Ps.bezierCurveTo(this.Xi+t,this.Yi+i,this.Xi+n,this.Yi+s,this.Xi+h,this.Yi+e),this}},rect:{value:function(t,i,n,s){return this.Ps.rect(this.Xi+t,this.Yi+i,n,s),this}},arc:{value:function(t,i,n,s,h,e){return this.Ps.arc(this.Xi+t,this.Yi+i,n,s,h,e),this}},ellipse:{value:function(t,i,n,s,h,e,u,r){return this.Ps.ellipse(this.Xi+t,this.Yi+i,n,s,h,e,u,r),this}},closePath:{value:function(){return this.Ps.closePath(),this}},Bi:{value:function(t){return this.Ai.fill(this.Ps,t),this}},Li:{value:function(){return this.Ai.stroke(this.Ps),this}},qi:{value:function(t){return this.Ai.clip(this.Ps,t),this}},tn:{value:function(t,i){return this.Ai.isPointInPath(this.Ps,t,i)}},nn:{value:function(t,i){return this.Ai.isPointInStroke(this.Ps,t,i)}}}),t(Hi,vi,gi,Xt,{points:{get:function(){return this.ks},set:function(t){this.ks=new T(t,{set:function(t,i,n){return t[i]=n,this.ws=!0}.bind(this)}),this.ws=!0}},built:{get:function(){return this._s}},append:{value:function(t,i){return this.ks.push(t,i),this.ys(),this}},insert:{value:function(t,i,n){return this.ks.splice(2*t,0,i,n),this.ys(),this}},delete:{value:function(t){return this.ks.splice(2*t,2),this.Ss(),this}},update:{value:function(t,i,n){return this.ks[2*t]=i,this.ks[2*t+1]=n,this}},peek:{value:function(t,i){return this.ks[2*t+i]}},clear:{value:function(){return this.ks.length=0,this.xs(),this}},rebuildPath:{value:function(){this.buildPath(this.context,this.built,this.length)}},buildPath:{value:function(t,i,n){t.beginPath()},writable:!0},rebuildPoints:{value:function(){this.buildPoints(this.startX,this.startY,this.points,this.length,this.built)}},buildPoints:Gt,updateTransform:{value:function(){if(this.Ti()){var t,i,n,s=this._s,h=this.Ln,e=this.P,u=this.N,r=this.J,o=this.xt,c=this.wt,f=this.Rt,a=this.Ct;if(1!==u||1!==c||0!==r||0!==o)for(t=0;t<e;t+=2)i=s[t],n=s[t+1],h[t]=i*u+n*o+f,h[t+1]=i*r+n*c+a;else if(0!==f||0!==a)for(t=0;t<e;t+=2)h[t]=s[t]+f,h[t+1]=s[t+1]+a;else for(t=0;t<e;t+=2)h[t]=s[t],h[t+1]=s[t+1]}return this}},Ti:{value:function(){var t=this.ws,i=this.Is!==this.P&&(this.Is=this._s.length=this.Ln.length=this.P,!0),n=(this.Rs!==this.Xi||this.Ts!==this.Yi)&&(this.Rs=this.Xi,this.Ts=this.Yi,!0),s=this.Cs(),h=vi.prototype.Ti.call(this);return this.ws=!1,t||i||n||s?(this.rebuildPoints(),!0):h}},ys:Gt,Ss:Gt,xs:Gt,Cs:Ht}),t(Oi,Hi,{buildPath:{value:function(t,i,n){t.beginPath(),t.moveTo(i[0],i[1]);for(var s=2;s<n;s+=2)t.lineTo(i[s],i[s+1])}},buildPoints:{value:function(t,i,n,s,h){for(var e=0;e<s;e+=2)h[e]=t+n[e],h[e+1]=i+n[e+1]}}}),t(ji,Oi,{buildPath:{value:function(t,i,n){Oi.prototype.buildPath.call(this,t,i,n),t.closePath()}}});Xt={xs:{value:function(){this.P=0}}},Ht=O({ys:{value:function(){this.P+=2}},Ss:{value:function(){this.P-=2}}},Xt);function Ei(t,i,n,s,h,e){Oi.call(this,t,i,n,s,h,e)}function Ni(t,i,n,s,h,e){ji.call(this,t,i,n,s,h,e)}function Ji(t,i,n,s,h,e){Oi.call(this,t,i,n,Ct(s,200),h,e)}t(Ei,Oi,Ht),t(Ni,ji,Ht),t(Ji,Oi,{buildPoints:{value:function(t,i,n,s,h){for(var e,u,r,o,c,f,a,l=n.length/2-1,v=0;v<s;v+=2){for(c=v/(s-2),e=r=u=0;e<n.length;e+=2)a=l,o=(0===(f=o=e/2)||f===a?1:1===f||a-f==1?a:At(a)/At(a-f)/At(f))*it(c,o)*it(1-c,l-o),u+=n[e]*o,r+=n[e+1]*o;h[v]=t+u,h[v+1]=i+r}}}});Ht={en:{get:function(){return this.ks[0]}},rn:{get:function(){return this.ks[1]}}};function Mi(t,i,n,s,h,e){ji.call(this,t,i,n,Ct(s,8),h,e)}function Ui(t,i,n,s,h,e){ji.call(this,t,i,n,Ct(s,200),h,e)}function Ki(t,i,n,s,h,e,u){ji.call(this,t,i,n,Ct(s,200),e,u),this.exponent=h}function Zi(t,i,n,s,h,e,u){Hi.call(this,t,i,n,s,e,u),this.tension=h}t(Mi,ji,_i,Ht,{width:{get:function(){return this.ks[2]-this.ks[0]}},height:{get:function(){return this.ks[3]-this.ks[1]}},buildPoints:{value:function(t,i,n,s,h){for(var e=t+n[0],u=i+n[1],r=t+n[2],o=i+n[3],c=r-e,f=o-u,a=s/4,l=a+a,v=s-a,d=0;d<a;d+=2)h[d]=d/a*c,h[d+1]=u,h[d+a]=r,h[d+a+1]=d/a*f,h[d+l+1]=o,h[d+v]=e;for(d=0;d<a;d+=2)h[d+l]=r-h[d],h[d]+=e,h[d+v+1]=o-h[d+a+1],h[d+a+1]+=u}}}),t(Ui,ji,di,Ht,{radius:{get:function(){var t=this.ks,i=t[2]-t[0],t=t[3]-t[1];return nt(i*i+t*t)}},buildPoints:{value:function(t,i,n,s,h){var e,u,r=ht(vt/s),o=st(vt/s),c=n[0],f=n[1],a=n[2]-c,l=n[3]-f;for(c+=t,f+=i,u=0;u<s;u+=2)h[u]=c+a,h[u+1]=f+l,e=l*r+a*o,a=a*r-l*o,l=e}}}),t(Ki,ji,{exponent:{get:function(){return this.As},set:function(t){this.As=Ct(t,3)}},rebuildPoints:{value:function(){this.buildPoints(this.startX,this.startY,this.points,this.length,this.exponent,this.built)}},buildPoints:{value:function(t,i,n,s,h,e){var u,r,o=s/4,c=n[0],f=n[1],a=n[2]-c,l=n[3]-f,v=nt(a*a+l*l),d=a/v,g=l/v;for(c+=t,f+=i,u=0;u<o;u+=2)a=v*it(ht(r=u/o*at),2/h),l=v*it(st(r),2/h),e[u]=a*d-l*g,e[u+1]=l*d+a*g;for(u=o;u<s;u+=2)e[u]=-e[u-o+1],e[u+1]=e[u-o],e[u-o]+=c,e[u-o+1]+=f;for(u=3*o;u<s;u+=2)e[u]+=c,e[u+1]+=f}},Cs:{value:function(){return this.Xs!==this.As&&(this.Xs=this.As,!0)}}}),t(Zi,Hi,Xt,{tension:{get:function(){return this.Ys},set:function(t){this.Ys=Ct(t,1)}},rebuildPoints:{value:function(){this.buildPoints(this.startX,this.startY,this.points,this.length,this.tension,this.built)}},buildPoints:{value:function(t,i,n,s,h,e){for(var u,r,o,c,f,a,l,v=0,d=0,g=e[0]=t+n[0],_=e[1]=i+n[1],p=n.length,b=2;b<p&&(l=3*b-4)<s;b+=2)o=t+n[b],c=i+n[b+1],f=t+n[b+2],a=i+n[b+3],f==f?(u=(f-g)/6*h,r=(a-_)/6*h):u=r=0,e[l]=g+v,e[l+1]=_+d,e[l+2]=o-u,e[l+3]=c-r,v=u,d=r,g=e[l+4]=o,_=e[l+5]=c}},buildPath:{value:function(t,i,n){t.beginPath(),t.moveTo(i[0],i[1]);for(var s=2;s<n;s+=6)t.bezierCurveTo(i[s],i[s+1],i[s+2],i[s+3],i[s+4],i[s+5])}},ys:{value:function(){0!==this.P?this.P+=6:this.P=2}},Ss:{value:function(){2<this.P?this.P-=6:this.P=0}},Cs:{value:function(){return this.Bs!==this.Ys&&(this.Bs=this.Ys,!0)}}});var Vi=new C(function(t){t.forEach(function(t){var i,n,s,h=t.target,e=h.Ds,u=e.length,r=h.getBoundingClientRect(),o=r.left%1,t=r.top%1,c=r.right-(h.Fs=r.left),f=r.bottom-(h.Ls=r.top);for(h.style.left=(o<.5?-o:1-o)+"px",h.style.top=(t<.5?-t:1-t)+"px",i=0;i<u;i++)s=(n=e[i]).Ai.Zi,(1<=tt((n.ln-c)*s)||1<=tt((n.vn-f)*s))&&n.resize(c,f)})}),$i=new A(function(t){t.forEach(function(t){var i,n=t.target,s=t.isIntersecting,h=n.Ds,e=h.length;if(n.Qs!==s)for(n.Qs=s,i=0;i<e;i++)h[i].onvisibilitychange(s)})}),A={Ws:{value:function(t,i){var n=this.qs;return _(n)&&(n=this.qs={}),_(n[t])&&(n[t]=[],this.onregister(t)),n[t].push(i),this}},zs:{value:function(t,i){var n=this.qs,s=n[t],i=s.indexOf(i);return-1!==i&&(1!==s.length?s.splice(i,1):(delete n[t],this.onunregister(t))),this}},Gs:{value:function(t,i){E(i,this.Hs);for(var n=this.qs[t],s=n.length;0<s&&(n[--s].call(this,i),!i.it););return this}},Hs:{value:{stop:{value:function(){this.it=!0}},it:{value:!1,writable:!0}}},Os:{value:function(t){var i=this.qs;return r(i)&&r(i[t])}}},tn=O({js:{value:["mousedown","mousemove","mouseup","mouseenter","mouseleave","mouseover","mouseout","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointercancel","pointerenter","pointerleave","pointerover","pointerout","gotpointercapture","lostpointercapture","click","dblclick","contextmenu","wheel","focus","blur","focusin","focusout","keydown","keyup","keypress"]},Es:{value:{mousedown:function(t){this.Gs(this.js[0],this.Ns(this.Js(t),""))},mousemove:function(t){this.Gs(this.js[1],this.Ms(this.Js(t),""))},mouseup:function(t){this.Gs(this.js[2],this.Js(t))},mouseenter:function(t){this.Gs(this.js[3],this.Ns(this.Js(t),""))},mouseleave:function(t){this.Gs(this.js[4],this.Js(t))},mouseover:function(t){this.Gs(this.js[5],this.Js(t))},mouseout:function(t){this.Gs(this.js[6],this.Js(t))},touchstart:function(t){for(var i,n=0,s=t.targetTouches,h=s.length;n<h;n++)i=s[n],this.Ns(this.Us(i),i.identifier);this.Gs(this.js[7],t)},touchmove:function(t){for(var i,n=0,s=t.targetTouches,h=s.length;n<h;n++)i=s[n],this.Ms(this.Us(i),i.identifier);this.Gs(this.js[8],t)},touchend:function(t){for(var i=0,n=t.targetTouches,s=n.length;i<s;i++)this.Us(n[i]);this.Gs(this.js[9],t)},touchcancel:function(t){this.Gs(this.js[10],t)},pointerdown:function(t){this.setPointerCapture(t.pointerId),this.Gs(this.js[11],this.Ns(this.Js(t),t.pointerId))},pointermove:function(t){this.Gs(this.js[12],this.Ms(this.Js(t),t.pointerId))},pointerup:function(t){this.releasePointerCapture(t.pointerId),this.Gs(this.js[13],this.Js(t))},pointercancel:function(t){this.Gs(this.js[14],this.Js(t))},pointerenter:function(t){this.Gs(this.js[15],this.Ns(this.Js(t),t.pointerId))},pointerleave:function(t){this.Gs(this.js[16],this.Js(t))},pointerover:function(t){this.Gs(this.js[17],this.Js(t))},pointerout:function(t){this.Gs(this.js[18],this.Js(t))},gotpointercapture:function(t){this.Gs(this.js[19],this.Js(t))},lostpointercapture:function(t){this.Gs(this.js[20],this.Js(t))},click:function(t){this.Gs(this.js[21],this.Js(t))},dblclick:function(t){this.Gs(this.js[22],this.Js(t))},contextmenu:function(t){t.preventDefault(),this.Gs(this.js[23],this.Js(t))},wheel:function(t){this.Gs(this.js[24],this.Js(E(t,{zooming:{value:it(2,-(t.deltaY||t.deltaX)/100)}})))},focus:function(t){this.Gs(this.js[25],t)},blur:function(t){this.Gs(this.js[26],t)},focusin:function(t){this.Gs(this.js[27],t)},focusout:function(t){this.Gs(this.js[28],t)},keydown:function(t){t.isComposing||"Process"===t.key||this.Gs(this.js[29],t)},keyup:function(t){t.isComposing||"Process"===t.key||this.Gs(this.js[30],t)},keypress:function(t){this.Gs(this.js[31],t)}}},Ks:{value:{passive:!1}},Zs:{value:function(t){return"touchmove"===t?"touchstart":"mousemove"===t?"mouseenter":"pointermove"===t?"pointerenter":"gotpointercapture"===t||"lostpointercapture"===t?"pointerdown":""}},Js:{value:function(t){return E(t,{x:{value:t.offsetX},y:{value:t.offsetY}})}},Us:{value:function(t){return E(t,{x:{value:t.pageX-this.Fs},y:{value:t.pageY-this.Ls}})}},Ns:{value:function(t,i){return this["__x"+i]=this["_x"+i]=t.x,this["__y"+i]=this["_y"+i]=t.y,t}},Ms:{value:function(t,i){return E(t,{moveX:{value:t.x-this["__x"+i]},moveY:{value:t.y-this["__y"+i]},movementX:{value:t.x-this["_x"+i]},movementY:{value:t.y-this["_y"+i]}}),this["_x"+i]=t.x,this["_y"+i]=t.y,t}},onregister:{value:function(t){this.addEventListener(t,this.Es[t],this.Ks)}},onunregister:{value:function(t){this.removeEventListener(t,this.Es[t],this.Ks)}}},A),A=j(O({__proto__:It,on:{value:function(t,i){return o(i)?this.Ws(t,i):this}},off:{value:function(t,i){return this.Os(t)?this.zs(t,i):this}},trigger:{value:function(t,i){return this.Os(t)?this.Gs(t,c(i)?i:{}):this}},onregister:Gt,onunregister:Gt},A)),nn=ei,sn=W;function hn(t,i,n,s,h,e){var u,r,o;c(t)&&(i=t.width,n=t.height,s=t.pixelRatio,h=t.duration,e=t.interval,t=t.container),nn.call(this,h,e),t=this.Vs=a(t)?z.querySelector(t):t,Tt(t)||(_(this.$s=t.children[0])&&t.appendChild(this.$s=z.createElement("div")),u=this.$s,_(u.Ds)&&(u.Ds=[],u.tabIndex=0,E(u,tn),(r=u.style).position="relative",r.overflow="hidden",r.borderWidth=r.padding=r.margin="0px",r.webkitUserSelect=r.userSelect=r.touchAction=r.outline="none",u.Qs=!1,u.th=function(){if(u.Qs)for(var t=u.Ds,i=t.length,n="visible"===z.visibilityState,s=0;s<i;s++)t[s].onvisibilitychange(n)}),this.width=i,this.height=n,(r=(n=this.ih=z.createElement("canvas")).style).position="absolute",r.pointerEvents="none",r.top=r.left="0px",(r=u.Ds).length?u.insertBefore(n,r[r.length-1].ih.nextSibling):u.appendChild(n),r.push(this),this.Ai=E(n.getContext("2d",_t),{Zi:{writable:!0},Gi:{value:[]}}),this.Zi=s,this.nh(),o=this,sn(function(){o.oncreate(),o.onresize(o.ln,o.vn),o.onrender()}),1===r.length?(Vi.observe(u),$i.observe(u),z.addEventListener("visibilitychange",u.th,!1)):u.Qs&&!z.hidden&&sn(function(){o.onvisibilitychange(!0)}))}_(W)&&(nn=hi,sn=F),t(hn,nn,{container:{get:function(){return this.Vs}},wrapper:{get:function(){return this.$s}},canvas:{get:function(){return this.ih}},context:{get:function(){return this.Ai}},width:{get:function(){return this.ln},set:function(t){this.$s.style.width=Tt(t)?"100%":t+"px"}},height:{get:function(){return this.vn},set:function(t){this.$s.style.height=Tt(t)?"100%":t+"px"}},pixelRatio:{get:function(){return this.Ai.Zi},set:function(t){this.Zi=t,this.nh(this.ln,this.vn).onrender()}},visible:{get:function(){return this.$s.Qs}},cursor:{get:function(){return this.$s.style.cursor},set:function(t){this.$s.style.cursor=t}},resize:{value:function(t,i){return this.nh(t,i).onresize(this.ln,this.vn),this.onrender(),this}},render:{value:function(t){return t?(this.isRunning()||this.onrender(),this):this.resume()}},clearRect:{value:function(t,i,n,s){return this.$i().Ai.clearRect(t,i,n,s),this}},destroy:{value:function(){var t,i=this.$s,n=this.sh,s=i.Ds;for(t in n)i.zs(t,n[t]);for(t in this.stop(),i.removeChild(this.ih),s.splice(s.indexOf(this),1),0===s.length&&(Vi.unobserve(i),$i.unobserve(i),i.Qs=!1,z.removeEventListener("visibilitychange",i.th,!1)),this.ondestroy(),this)delete this[t];return this}},on:{value:function(t,s){var i,n,h=this.$s,e=o(s);return-1!==h.js.indexOf(t)?(i=this.sh,_(i)&&(i=this.sh={}),r(i[t])?(h.zs(t,i[t]),delete i[t]):!e||(n=h.Zs(t))&&_(i[n])&&h.Ws(n,i[n]=u),e&&h.Ws(t,i[t]=s.bind(this))):this["on"+t]="update"===t?e?function(t,i,n){s.call(this,t,i,n),this.onrender()}:delete this.onupdate:e?s:u,this}},create:{value:function(t,i,n){if(a(t)&&(t=en[t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()]),!o(t)||t===hn)return It;var s=new t;return this.m(s),c(i)?Tt(n)?O(s,i):((i=R.call(arguments,1)).unshift(s),O.apply(It,i)):1<arguments.length&&t.apply(s,R.call(arguments,1)),s}},onupdate:{value:function(t,i,n){this.onrender()},writable:!0},oncreate:Gt,onresize:Gt,onrender:Gt,onvisibilitychange:Gt,ondestroy:Gt,m:{value:function(t){t.Ci?t.context=this.Ai:nn.prototype.m.call(this,t)}},k:{value:function(t){t.context===this.Ai?t.context=Rt:nn.prototype.k.call(this,t)}},nh:{value:function(t,i){var n,s=this.ih,h=this.Ai,e=h.Zi=this.Zi||x.devicePixelRatio||1;return(Tt(t)||Tt(i))&&(n=this.$s.getBoundingClientRect(),Tt(t)&&(t=n.right-n.left),Tt(i)&&(i=n.bottom-n.top)),s.style.width=(this.ln=(s.width=$(t*e))/e)+"px",s.style.height=(this.vn=(s.height=$(i*e))/e)+"px",h.Gi.length=0,this.$i().hh()}},$i:{value:function(){var t=this.Ai,i=t.Zi;return 1!==i?t.setTransform(i,0,0,i,0,0):t.resetTransform(),oi(t),this}},hh:{value:function(){var t=this.Ai;return t.Hi=1,t.Oi=pt,t.Nt=bt,t.Mt=0,t.Kt=mt,t.Vt=0,t.ti=0,t.ni=Pt,t.hi=kt,t.ui=wt,t.oi=0,t.fi=1,t.li="butt",t.di="miter",t._i=10,i(t),t.ji=!0,t.Ei="low",this}}});var Gt=j({__proto__:It,Roundrect:Pi,Imagedata:yi,Polyshape:Hi,Superellipse:Ki,Smoothline:Zi}),en=j({__proto__:Gt,util:Ot,Rgb:Zt,Hsl:Vt,Lab:ti,Point:ii,Animation:nn,Animator:ri,Group:fi,Shape:vi,Rect:bi,Grid:mi,RoundRect:Pi,Image:ki,Wave:wi,ImageData:yi,Text:xi,Arc:Ii,Sector:Ri,Ring:Ti,Ellipse:Ci,Isogon:Ai,Star:Xi,Koch:Bi,Line:Di,Link:Fi,Curve:Li,Triangle:Qi,Droplet:Wi,Heart:qi,Pin:zi,Path:Gi,PolyShape:Hi,Polyline:Ei,Polygon:Ni,Bezier:Ji,Rectangle:Mi,Circle:Ui,SuperEllipse:Ki,SmoothLine:Zi,Canvas:hn,IEventful:A,IRenderable:ai,IAnimatable:ui});return en});
